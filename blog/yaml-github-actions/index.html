<!DOCTYPE html><!--AGDvI7x7pg5BKZ9idhg6I--><html lang="en" class="__variable_e2c820"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><link rel="preload" href="/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/65a38505255551d0.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/bc0c8788dc67e800.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/b9e59270efb3d9c1.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/fa5515d2d4b15322.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/5f17e0cde0835ef7.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/19582c8e045a8270.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/08610e680134a8d2.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/7d4b05fb122450e7.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-cf943af1de5194e2.js"/><script src="/_next/static/chunks/72286124-189ca05e260e434a.js" async=""></script><script src="/_next/static/chunks/355-c4e12ba6c3743e47.js" async=""></script><script src="/_next/static/chunks/main-app-54213948de38a852.js" async=""></script><script src="/_next/static/chunks/517-bdd0b5d5da77e85f.js" async=""></script><script src="/_next/static/chunks/755-3587c4ecb19090c1.js" async=""></script><script src="/_next/static/chunks/app/layout-17292ad9eab6358e.js" async=""></script><script src="/_next/static/chunks/584-d512ad299cfb1414.js" async=""></script><script src="/_next/static/chunks/635-49840067d1b5af69.js" async=""></script><script src="/_next/static/chunks/297-bd228610d2949346.js" async=""></script><script src="/_next/static/chunks/app/(index)/blog/%5B...slug%5D/page-35d6a2a28b14a283.js" async=""></script><link rel="expect" href="#_R_" blocking="render"/><meta name="next-size-adjust" content=""/><meta name="theme-color" content="#f9f9f9"/><title>NPM package deployment using YAML GitHub Actions | Jaxson Van Doorn</title><meta name="description" content="All-around developer, half-designer and tinkerer."/><link rel="manifest" href="/manifest.webmanifest"/><meta name="creator" content="Jaxson Van Doorn"/><meta name="publisher" content="Jaxson Van Doorn"/><meta property="og:title" content="Jaxson Van Doorn"/><meta property="og:description" content="All-around developer, half-designer and tinkerer."/><meta property="og:image:type" content="image/png"/><meta property="og:image" content="https://jaxs.onl/meta-image.png"/><meta property="og:image:alt" content="Cover image for jaxs.onl"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@jaxsonvandoorn"/><meta name="twitter:title" content="NPM package deployment using YAML GitHub Actions"/><meta name="twitter:description" content="All-around developer, half-designer and tinkerer."/><meta name="twitter:image" content="https://jaxs.onl/meta-image.png"/><meta name="twitter:image:alt" content="Cover image for jaxs.onl"/><link rel="shortcut icon" href="/favicon.png"/><link rel="icon" href="/favicon.png"/><link rel="apple-touch-icon" href="/icons/mask-32x32.png" sizes="32x32" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-48x48.png" sizes="48x48" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-72x72.png" sizes="72x72" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-144x144.png" sizes="144x144" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-192x192.png" sizes="192x192" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-256x256.png" sizes="256x256" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-384x384.png" sizes="384x384" type="image/png"/><link rel="apple-touch-icon" href="/icons/mask-512x512.png" sizes="512x512" type="image/png"/><script>
  ((a,b)=>{try{let c=localStorage.getItem(a)||b,d="system"===c?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":c,e=document.querySelector('meta[name="theme-color"]');e&&("dark"===d?e.setAttribute("content","#14120b"):e.setAttribute("content","#f9f9f9"))}catch(a){}})('theme', 'system')</script><script src="/scripts/onload.js"></script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><div hidden=""><!--$--><!--/$--></div><div id="__next"><script>((a,b,c,d,e,f,g,h)=>{let i=document.documentElement,j=["light","dark"];function k(b){var c;(Array.isArray(a)?a:[a]).forEach(a=>{let c="class"===a,d=c&&f?e.map(a=>f[a]||a):e;c?(i.classList.remove(...d),i.classList.add(f&&f[b]?f[b]:b)):i.setAttribute(a,b)}),c=b,h&&j.includes(c)&&(i.style.colorScheme=c)}if(d)k(d);else try{let a=localStorage.getItem(b)||c,d=g&&"system"===a?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a;k(d)}catch(a){}})("class","theme","system",null,["light","dark"],{"light":"light","dark":"dark"},true,true)</script><div class="b0lio20" vt-name="page" vt-update="none" vt-share="fade"><div class="_1mtlrut1 _1mtlrut0"><div class="mm062y5r mm062y5s" style="--mm062y5o:20px;--mm062y5p:120px" aria-hidden="true"></div><main class="_1mtlrut2"><div class="mm062y8x mm062y1f" style="--mm062y1c:var(--space-400)" vt-name="blog-title-yaml-github-actions" vt-update="none" vt-share="slide-in"><h1 class="mm062y9o mm062y5x mm062y5r mm062yr mm062yax mm062y4x mm062y4f mm062y39" style="--mm062y5u:1px;--mm062y5o:1px;--mm062yo:-1px;--mm062y4u:rect(0 0 0 0);--mm062y4c:nowrap;--mm062y36:0">NPM package deployment using YAML GitHub Actions</h1><a class="" aria-label="Back to homepage" href="/"><div class="mm062y69 mm062y6a mm062y63 mm062y3 mm062y9u mm062y8u mm062y4f" style="--mm062y66:var(--font-size-xs);--mm062y67:var(--font-size-md);--mm062y60:var(--font-weight-semibold);--mm062y0:var(--color-orange);--mm062y4c:nowrap"><div style="opacity:1;transform:none"><span class="">NPM package deployment using YAML GitHub Actions</span></div></div></a></div><time class="mm062y29 mm062y8o mm062y69 mm062y63 mm062y3" style="--mm062y26:var(--space-200);--mm062y66:15px;--mm062y60:medium;--mm062y0:var(--color-text-primary)" dateTime="2019-08-21T00:00:00.000Z" title="Tuesday, August 20, 2019">August 20, 2019</time><div class="_1kxkw1h0 mm062y29" style="--mm062y26:var(--space-1600)"><p class="_1kxkw1h0">Recently <a href="http://github.com" target="_blank" rel="noopener noreferrer">GitHub</a> announced that <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a> will be <a href="https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/" target="_blank" rel="noopener noreferrer">moving away</a> from the original <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a> syntax in-favour of a <a href="https://yaml.org/" target="_blank" rel="noopener noreferrer">YAML</a> format
similar to <a href="https://travis-ci.org/" target="_blank" rel="noopener noreferrer">Travis CI</a> and <a href="https://bitbucket.org/product/features/pipelines" target="_blank" rel="noopener noreferrer">Bitbucket Pipelines</a>.  This means that <a href="https://github.com/hashicorp/hcl" target="_blank" rel="noopener noreferrer">HCL</a> style actions will no longer work <a href="https://developer.github.com/actions/" target="_blank" rel="noopener noreferrer">after September 30, 2019</a>.  It is possible to migrate using a <a href="https://help.github.com/en/articles/migrating-github-actions-from-hcl-syntax-to-yaml-syntax" target="_blank" rel="noopener noreferrer">migration script</a> however in-some cases it may be required to reconfigure.</p>
<p class="_1kxkw1h0">This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the <a href="https://yaml.org/" target="_blank" rel="noopener noreferrer">YAML</a> format.  This means that using <a href="https://github.com/actions/bin/tree/master/filter/bin" target="_blank" rel="noopener noreferrer">actions/bin/filter</a> to trigger a deploy would fail the build unless a release tag was found.  With this in mind, reconfiguring my <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a> seemed like the best choice.</p>
<a id="orgb58448b"></a>
<h2 class="_1kxkw1h0 _1f97psy1" id="desired-behaviour"><a href="#desired-behaviour" class="anchor"><span class="icon icon-link"></span></a>Desired Behaviour</h2>
<p class="_1kxkw1h0">My particular use of <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a> is for deploying my small <a href="https://docs.npmjs.com/creating-node-js-modules" target="_blank" rel="noopener noreferrer">NPM packages</a>.</p>
<p class="_1kxkw1h0">To keep it simple I wanted the following to occur:</p>
<ul>
<li>Install dependencies, Build and Test package on each commit</li>
<li>Publish package if a release tag was created</li>
</ul>
<a id="org521573d"></a>
<h2 class="_1kxkw1h0 _1f97psy1" id="creating-the-action-configuration"><a href="#creating-the-action-configuration" class="anchor"><span class="icon icon-link"></span></a>Creating the Action Configuration</h2>
<p class="_1kxkw1h0">Create the file <code class="code">.github/workflows/workflow.yml</code></p>
<a id="org9bc8afb"></a>
<h3 class="_1kxkw1h0 _1f97psy1" id="checking-for-tag"><a href="#checking-for-tag" class="anchor"><span class="icon icon-link"></span></a>Checking for Tag</h3>
<p class="_1kxkw1h0">This method simply builds and tests the package on any commit.</p>
<p class="_1kxkw1h0">Then if it finds a tag starting with <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">v</strong>, it will trigger a deploy.</p>
<p class="_1kxkw1h0">So if a <a href="https://help.github.com/en/articles/creating-releases" target="_blank" rel="noopener noreferrer">GitHub Release</a> is created with the tag <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">v2.3.4</strong>, it will trigger a deploy.</p>
<p class="_1kxkw1h0">This is a bit naive however for my purposes I usually don&#x27;t tag unless its a release.</p>
<p class="_1kxkw1h0">One advantage of checking for a tag this way is that it cuts down on unneeded builds as a whole build can only ever run 1 or 2 times (2 in the case a build is deployed).</p>
<p class="_1kxkw1h0">The <a href="https://github.com/features/actions" target="_blank" rel="noopener noreferrer">GitHub Actions</a> docs mentions being able to <a href="https://help.github.com/en/articles/workflow-syntax-for-github-actions#example-restricting-the-workflow-run-to-specific-refs-and-paths" target="_blank" rel="noopener noreferrer">restrict actions</a> to certain branches or tags however I could not get this to work.</p>
<pre class="shiki shiki-themes github-light catppuccin-mocha mm062yx mm062y1f mm062y1l mm062yl mm062y4f mm062y7f mm062y9 mm062yf mm062y3f mm062y39 mm062y3 mm062y7l mm062y69 mm062ya6" style="background-color:#fff;--shiki-dark-bg:#1e1e2e;color:#24292e;--shiki-dark:#cdd6f4;--mm062yu:var(--space-200);--mm062y1c:var(--space-200);--mm062y1i:var(--space-800);--mm062yi:var(--radius-md);--mm062y4c:pre-wrap;--mm062y7c:1.42;--mm062y6:var(--color-code-background);--mm062yc:var(--color-code-block-border);--mm062y3c:solid;--mm062y36:1px;--mm062y0:#aaaaca;--mm062y7i:var(--font-mono);--mm062y66:13px" tabindex="0"><code class="code"><span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> build</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Name Action Build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#FAB387">on</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#24292E;--shiki-dark:#9399B2"> [</span><span style="color:#032F62;--shiki-dark:#A6E3A1">push</span><span style="color:#24292E;--shiki-dark:#9399B2">]</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">  # Trigger on push</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">jobs</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">  run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">    runs-on</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> ubuntu-latest</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                         # Run on Ubuntu Docker image</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">    steps</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Checkout Repo</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                          # Checkout repo</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      uses</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> actions/checkout@v1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Use Node.js</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                            # Configure Node.js</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      uses</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> actions/setup-node@v1</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      with</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        node-version</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> &#x27;12.9&#x27;</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                       # Set Node.js Version</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        registry-url</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> &#x27;https://registry.npmjs.org&#x27;</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Set Node.js reigistry</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Deploy Info</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                            # Print GitHub Deploy info</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      env</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        GITHUB_CONTEXT</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> ${{ toJson(github) }}</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> echo &quot;$GITHUB_CONTEXT&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Install</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                                # Install dependancies</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm install</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Build</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                                  # Build app if needed</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm run build --if-present</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Test</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm run test --if-present</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">               # Run tests if needed</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Publish</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      if</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> startsWith(github.ref, &#x27;refs/tags/v&#x27;)</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">    # Check if publish step should run</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm publish --access public</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">             # Publish package</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      env</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        NODE_AUTH_TOKEN</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> ${{ secrets.NPM_AUTH_TOKEN }}</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Set NPM auth token from GitHub Secrets</span></span></code></pre>
<a id="org2d248b4"></a>
<h3 class="_1kxkw1h0 _1f97psy1" id="checking-for-a-release"><a href="#checking-for-a-release" class="anchor"><span class="icon icon-link"></span></a>Checking for a Release</h3>
<p class="_1kxkw1h0">If you found the previous method too naive, you may want to check for a <a href="https://help.github.com/en/articles/creating-releases" target="_blank" rel="noopener noreferrer">GitHub Release</a> before triggering a deploy.</p>
<p class="_1kxkw1h0">The drawback to this is that a few extraneous builds will be triggered as the <code class="code">release</code> event will fire both when the release is <code class="code">created</code> and <code class="code">published</code>.  As far as I am aware this can not be restricted using the <code class="code">on</code> property.</p>
<p class="_1kxkw1h0">To ensure we only deploy once, we will indicate to only run the <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">Publish</strong> step when a release is <code class="code">published</code>.</p>
<pre class="shiki shiki-themes github-light catppuccin-mocha mm062yx mm062y1f mm062y1l mm062yl mm062y4f mm062y7f mm062y9 mm062yf mm062y3f mm062y39 mm062y3 mm062y7l mm062y69 mm062ya6" style="background-color:#fff;--shiki-dark-bg:#1e1e2e;color:#24292e;--shiki-dark:#cdd6f4;--mm062yu:var(--space-200);--mm062y1c:var(--space-200);--mm062y1i:var(--space-800);--mm062yi:var(--radius-md);--mm062y4c:pre-wrap;--mm062y7c:1.42;--mm062y6:var(--color-code-background);--mm062yc:var(--color-code-block-border);--mm062y3c:solid;--mm062y36:1px;--mm062y0:#aaaaca;--mm062y7i:var(--font-mono);--mm062y66:13px" tabindex="0"><code class="code"><span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#005CC5;--shiki-dark:#FAB387">on</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">  push</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">     # Run build on push (commit in most cases)</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">    tag</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#24292E;--shiki-dark:#9399B2"> []</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Only run build if not tagged</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">  release</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">  # Run build on release</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">    tag</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> v*</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">    # Check for release tag</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">jobs</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">  run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">    runs-on</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> ubuntu-latest</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                         # Run on Ubuntu Docker image</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">    steps</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Checkout Repo</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                          # Checkout repo</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      uses</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> actions/checkout@v1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Use Node.js</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                            # Configure Node.js</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      uses</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> actions/setup-node@v1</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      with</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        node-version</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> &#x27;12.9&#x27;</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                       # Set Node.js Version</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        registry-url</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> &#x27;https://registry.npmjs.org&#x27;</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Set Node.js reigistry</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Deploy Info</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                            # Print GitHub Deploy info</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      env</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        GITHUB_CONTEXT</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> ${{ toJson(github) }}</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> echo &quot;$GITHUB_CONTEXT&quot;</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Install</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                                # Install dependancies</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm install</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Build</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">                                  # Build app if needed</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm run build --if-present</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Test</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm run test --if-present</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">               # Run tests if needed</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#9399B2">    -</span><span style="color:#22863A;--shiki-dark:#89B4FA"> name</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> Publish</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      if</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> github.event_name == &#x27;release&#x27; &amp;&amp; github.event.action == &#x27;published&#x27;</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Check if publish step should run</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      run</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> npm publish --access public</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic">             # Publish package</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">      env</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span></span>
<span class="line"><span style="color:#22863A;--shiki-dark:#89B4FA">        NODE_AUTH_TOKEN</span><span style="color:#24292E;--shiki-dark:#94E2D5">:</span><span style="color:#032F62;--shiki-dark:#A6E3A1"> ${{ secrets.NPM_AUTH_TOKEN }}</span><span style="color:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#9399B2;--shiki-dark-font-style:italic"> # Set NPM auth token from GitHub Secrets</span></span></code></pre>
<a id="org515fedd"></a>
<h2 class="_1kxkw1h0 _1f97psy1" id="setting-npm-auth-token-secret"><a href="#setting-npm-auth-token-secret" class="anchor"><span class="icon icon-link"></span></a>Setting NPM Auth Token Secret</h2>
<p class="_1kxkw1h0">Simply go to your repo <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">Settings</strong> and select the <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">Secrets</strong> tab.</p>
<p class="_1kxkw1h0">Then <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">Add a new secret</strong> with the <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">Name</strong> of <code class="code">NPM_AUTH_TOKEN</code> and set the <strong class="mm062y63" style="--mm062y60:var(--font-weight-semibold)">Value</strong> to your <a href="https://docs.npmjs.com/creating-and-viewing-authentication-tokens" target="_blank" rel="noopener noreferrer">NPM token</a>.</p>
<a id="org5d470fc"></a>
<h2 class="_1kxkw1h0 _1f97psy1" id="adding-the-github-actions-badge"><a href="#adding-the-github-actions-badge" class="anchor"><span class="icon icon-link"></span></a>Adding the GitHub Actions badge</h2>
<p class="_1kxkw1h0"><a href="http://github.com" target="_blank" rel="noopener noreferrer">GitHub</a> now offers an undocumented API which will return nice <a href="https://travis-ci.org/" target="_blank" rel="noopener noreferrer">Travis CI</a> like status badge.</p>
<p class="_1kxkw1h0">An example can be seen on the <a href="https://github.com/actions/toolkit" target="_blank" rel="noopener noreferrer">actions/toolkit</a> repo.</p>
<p class="_1kxkw1h0">The format for the API is as follows:</p>
<pre class="shiki shiki-themes github-light catppuccin-mocha mm062yx mm062y1f mm062y1l mm062yl mm062y4f mm062y7f mm062y9 mm062yf mm062y3f mm062y39 mm062y3 mm062y7l mm062y69 mm062ya6" style="background-color:#fff;--shiki-dark-bg:#1e1e2e;color:#24292e;--shiki-dark:#cdd6f4;--mm062yu:var(--space-200);--mm062y1c:var(--space-200);--mm062y1i:var(--space-800);--mm062yi:var(--radius-md);--mm062y4c:pre-wrap;--mm062y7c:1.42;--mm062y6:var(--color-code-background);--mm062yc:var(--color-code-block-border);--mm062y3c:solid;--mm062y36:1px;--mm062y0:#aaaaca;--mm062y7i:var(--font-mono);--mm062y66:13px" tabindex="0"><code class="code"><span class="line"><span style="color:#24292E;--shiki-dark:#CDD6F4">https://github.com/</span><span style="color:#24292E;--shiki-dark:#94E2D5">&lt;</span><span style="color:#22863A;--shiki-dark:#89B4FA">user|org</span><span style="color:#24292E;--shiki-dark:#94E2D5">&gt;</span><span style="color:#24292E;--shiki-dark:#CDD6F4">/</span><span style="color:#24292E;--shiki-dark:#94E2D5">&lt;</span><span style="color:#22863A;--shiki-dark:#89B4FA">repo</span><span style="color:#24292E;--shiki-dark:#94E2D5">&gt;</span><span style="color:#24292E;--shiki-dark:#CDD6F4">/</span><span style="color:#24292E;--shiki-dark:#94E2D5">&lt;</span><span style="color:#22863A;--shiki-dark:#89B4FA">action_name</span><span style="color:#24292E;--shiki-dark:#94E2D5">&gt;</span><span style="color:#24292E;--shiki-dark:#CDD6F4">/badge.svg</span></span></code></pre>
<p class="_1kxkw1h0">The <code class="code">action_name</code> propery is the <code class="code">name</code> field in the <a href="https://yaml.org/" target="_blank" rel="noopener noreferrer">YAML</a> which in this case is <code class="code">build</code>.</p>
<p class="_1kxkw1h0">An example of this would be:</p>
<pre class="shiki shiki-themes github-light catppuccin-mocha mm062yx mm062y1f mm062y1l mm062yl mm062y4f mm062y7f mm062y9 mm062yf mm062y3f mm062y39 mm062y3 mm062y7l mm062y69 mm062ya6" style="background-color:#fff;--shiki-dark-bg:#1e1e2e;color:#24292e;--shiki-dark:#cdd6f4;--mm062yu:var(--space-200);--mm062y1c:var(--space-200);--mm062y1i:var(--space-800);--mm062yi:var(--radius-md);--mm062y4c:pre-wrap;--mm062y7c:1.42;--mm062y6:var(--color-code-background);--mm062yc:var(--color-code-block-border);--mm062y3c:solid;--mm062y36:1px;--mm062y0:#aaaaca;--mm062y7i:var(--font-mono);--mm062y66:13px" tabindex="0"><code class="code"><span class="line"><span style="color:#24292E;--shiki-dark:#CDD6F4">https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg</span></span></code></pre>
<p class="_1kxkw1h0">To make it even nicer we can link the badge to our repo&#x27;s actions page:</p>
<pre class="shiki shiki-themes github-light catppuccin-mocha mm062yx mm062y1f mm062y1l mm062yl mm062y4f mm062y7f mm062y9 mm062yf mm062y3f mm062y39 mm062y3 mm062y7l mm062y69 mm062ya6" style="background-color:#fff;--shiki-dark-bg:#1e1e2e;color:#24292e;--shiki-dark:#cdd6f4;--mm062yu:var(--space-200);--mm062y1c:var(--space-200);--mm062y1i:var(--space-800);--mm062yi:var(--radius-md);--mm062y4c:pre-wrap;--mm062y7c:1.42;--mm062y6:var(--color-code-background);--mm062yc:var(--color-code-block-border);--mm062y3c:solid;--mm062y36:1px;--mm062y0:#aaaaca;--mm062y7i:var(--font-mono);--mm062y66:13px" tabindex="0"><code class="code"><span class="line"><span style="color:#24292E;--shiki-dark:#B4BEFE">[</span><span style="color:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#89B4FA;--shiki-dark-text-decoration:inherit">![</span><span style="color:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#A6E3A1;--shiki-dark-text-decoration:inherit">img</span><span style="color:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#89B4FA;--shiki-dark-text-decoration:inherit">]</span><span style="color:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#9399B2;--shiki-dark-text-decoration:inherit">(</span><span style="color:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#89B4FA;--shiki-dark-text-decoration:inherit">https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg</span><span style="color:#032F62;--shiki-light-text-decoration:underline;--shiki-dark:#9399B2;--shiki-dark-text-decoration:inherit">)</span><span style="color:#24292E;--shiki-dark:#B4BEFE">]</span><span style="color:#24292E;--shiki-dark:#9399B2">(</span><span style="color:#24292E;--shiki-light-text-decoration:underline;--shiki-dark:#89B4FA;--shiki-dark-text-decoration:inherit">https://github.com/woofers/ludum-dare-badges/actions</span><span style="color:#24292E;--shiki-dark:#9399B2">)</span></span></code></pre>
<p class="_1kxkw1h0">It will look something like this:</p></div></main></div><!--$--><!--/$--></div></div><script src="/_next/static/chunks/webpack-cf943af1de5194e2.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[6761,[\"517\",\"static/chunks/517-bdd0b5d5da77e85f.js\",\"755\",\"static/chunks/755-3587c4ecb19090c1.js\",\"177\",\"static/chunks/app/layout-17292ad9eab6358e.js\"],\"ThemeProvider\"]\n3:I[1446,[],\"\"]\n4:I[8748,[],\"\"]\n5:\"$Sreact.view_transition\"\nb:I[1646,[],\"\"]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/65a38505255551d0.css\",\"style\"]\n:HL[\"/_next/static/css/bc0c8788dc67e800.css\",\"style\"]\n:HL[\"/_next/static/css/b9e59270efb3d9c1.css\",\"style\"]\n:HL[\"/_next/static/css/fa5515d2d4b15322.css\",\"style\"]\n:HL[\"/_next/static/css/5f17e0cde0835ef7.css\",\"style\"]\n:HL[\"/_next/static/css/19582c8e045a8270.css\",\"style\"]\n:HL[\"/_next/static/css/08610e680134a8d2.css\",\"style\"]\n:HL[\"/_next/static/css/7d4b05fb122450e7.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"AGDvI7x7pg5BKZ9idhg6I\",\"p\":\"\",\"c\":[\"\",\"blog\",\"yaml-github-actions\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"(index)\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"yaml-github-actions\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/65a38505255551d0.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/bc0c8788dc67e800.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b9e59270efb3d9c1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"3\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/fa5515d2d4b15322.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"className\":\"__variable_e2c820\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n  ((a,b)=\u003e{try{let c=localStorage.getItem(a)||b,d=\\\"system\\\"===c?window.matchMedia(\\\"(prefers-color-scheme: dark)\\\").matches?\\\"dark\\\":\\\"light\\\":c,e=document.querySelector('meta[name=\\\"theme-color\\\"]');e\u0026\u0026(\\\"dark\\\"===d?e.setAttribute(\\\"content\\\",\\\"#14120b\\\"):e.setAttribute(\\\"content\\\",\\\"#f9f9f9\\\"))}catch(a){}})('theme', 'system')\"}}],[\"$\",\"script\",null,{\"src\":\"/scripts/onload.js\"}]]}],[\"$\",\"body\",null,{\"suppressHydrationWarning\":true,\"children\":[\"$\",\"div\",null,{\"id\":\"__next\",\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]}]]}]]}],{\"children\":[\"(index)\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5f17e0cde0835ef7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$5\",null,{\"default\":\"none\",\"share\":\"fade\",\"name\":\"page\",\"children\":[\"$\",\"div\",null,{\"className\":\"b0lio20\",\"style\":{},\"ref\":\"$undefined\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:style\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:1:props:style\",\"children\":404}],[\"$\",\"div\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:style\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style\",\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"yaml-github-actions\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L6\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/19582c8e045a8270.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],\"$L7\",\"$L8\"],\"$L9\"]}],{},null,false]},null,false]},null,false]},null,false]},null,false],\"$La\",false]],\"m\":\"$undefined\",\"G\":[\"$b\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"c:I[3070,[],\"OutletBoundary\"]\ne:I[5822,[],\"AsyncMetadataOutlet\"]\n10:I[3070,[],\"ViewportBoundary\"]\n12:I[3070,[],\"MetadataBoundary\"]\n13:\"$Sreact.suspense\"\n7:[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/08610e680134a8d2.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]\n8:[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/7d4b05fb122450e7.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]\n9:[\"$\",\"$Lc\",null,{\"children\":[\"$Ld\",[\"$\",\"$Le\",null,{\"promise\":\"$@f\"}]]}]\na:[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$L10\",null,{\"children\":\"$L11\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$L12\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$13\",null,{\"fallback\":null,\"children\":\"$L14\"}]}]}]]}]\n"])</script><script>self.__next_f.push([1,"15:I[2281,[\"584\",\"static/chunks/584-d512ad299cfb1414.js\",\"635\",\"static/chunks/635-49840067d1b5af69.js\",\"755\",\"static/chunks/755-3587c4ecb19090c1.js\",\"297\",\"static/chunks/297-bd228610d2949346.js\",\"489\",\"static/chunks/app/(index)/blog/%5B...slug%5D/page-35d6a2a28b14a283.js\"],\"SlideLink\"]\n16:I[4545,[\"584\",\"static/chunks/584-d512ad299cfb1414.js\",\"635\",\"static/chunks/635-49840067d1b5af69.js\",\"755\",\"static/chunks/755-3587c4ecb19090c1.js\",\"297\",\"static/chunks/297-bd228610d2949346.js\",\"489\",\"static/chunks/app/(index)/blog/%5B...slug%5D/page-35d6a2a28b14a283.js\"],\"Mdx\"]\n17:T9841,"])</script><script>self.__next_f.push([1,"var Component=(()=\u003e{var k=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var m=(s,e)=\u003e()=\u003e(e||s((e={exports:{}}).exports,e),e.exports),g=(s,e)=\u003e{for(var n in e)r(s,n,{get:e[n],enumerable:!0})},h=(s,e,n,a)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let l of y(e))!u.call(s,l)\u0026\u0026l!==n\u0026\u0026r(s,l,{get:()=\u003ee[l],enumerable:!(a=p(e,l))||a.enumerable});return s};var E=(s,e,n)=\u003e(n=s!=null?k(A(s)):{},h(e||!s||!s.__esModule?r(n,\"default\",{value:s,enumerable:!0}):n,s)),f=s=\u003eh(r({},\"__esModule\",{value:!0}),s);var c=m((D,t)=\u003e{t.exports=_jsx_runtime});var B={};g(B,{default:()=\u003ed,frontmatter:()=\u003eb});var i=E(c()),b={layout:\"post\",title:\"NPM package deployment using YAML GitHub Actions\",date:\"2019-08-21\",description:\"Recently GitHub announced that GitHub Actions will be moving away from the original HCL syntax in-favour of a YAML format similar to Travis CI and Bitbucket Pipelines. This means that HCL style actions will no longer work after September 30, 2019. It is possible to migrate using a migration script however in-some cases it may be required to reconfigure. This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the YAML format.\"};function o(s){let e={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:[\"Recently \",(0,i.jsx)(e.a,{href:\"http://github.com\",children:\"GitHub\"}),\" announced that \",(0,i.jsx)(e.a,{href:\"https://github.com/features/actions\",children:\"GitHub Actions\"}),\" will be \",(0,i.jsx)(e.a,{href:\"https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/\",children:\"moving away\"}),\" from the original \",(0,i.jsx)(e.a,{href:\"https://github.com/hashicorp/hcl\",children:\"HCL\"}),\" syntax in-favour of a \",(0,i.jsx)(e.a,{href:\"https://yaml.org/\",children:\"YAML\"}),` format\nsimilar to `,(0,i.jsx)(e.a,{href:\"https://travis-ci.org/\",children:\"Travis CI\"}),\" and \",(0,i.jsx)(e.a,{href:\"https://bitbucket.org/product/features/pipelines\",children:\"Bitbucket Pipelines\"}),\".  This means that \",(0,i.jsx)(e.a,{href:\"https://github.com/hashicorp/hcl\",children:\"HCL\"}),\" style actions will no longer work \",(0,i.jsx)(e.a,{href:\"https://developer.github.com/actions/\",children:\"after September 30, 2019\"}),\".  It is possible to migrate using a \",(0,i.jsx)(e.a,{href:\"https://help.github.com/en/articles/migrating-github-actions-from-hcl-syntax-to-yaml-syntax\",children:\"migration script\"}),\" however in-some cases it may be required to reconfigure.\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the \",(0,i.jsx)(e.a,{href:\"https://yaml.org/\",children:\"YAML\"}),\" format.  This means that using \",(0,i.jsx)(e.a,{href:\"https://github.com/actions/bin/tree/master/filter/bin\",children:\"actions/bin/filter\"}),\" to trigger a deploy would fail the build unless a release tag was found.  With this in mind, reconfiguring my \",(0,i.jsx)(e.a,{href:\"https://github.com/features/actions\",children:\"GitHub Actions\"}),\" seemed like the best choice.\"]}),`\n`,(0,i.jsx)(\"a\",{id:\"orgb58448b\"}),`\n`,(0,i.jsxs)(e.h2,{id:\"desired-behaviour\",children:[(0,i.jsx)(e.a,{className:\"anchor\",href:\"#desired-behaviour\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"Desired Behaviour\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"My particular use of \",(0,i.jsx)(e.a,{href:\"https://github.com/features/actions\",children:\"GitHub Actions\"}),\" is for deploying my small \",(0,i.jsx)(e.a,{href:\"https://docs.npmjs.com/creating-node-js-modules\",children:\"NPM packages\"}),\".\"]}),`\n`,(0,i.jsx)(e.p,{children:\"To keep it simple I wanted the following to occur:\"}),`\n`,(0,i.jsxs)(e.ul,{children:[`\n`,(0,i.jsx)(e.li,{children:\"Install dependencies, Build and Test package on each commit\"}),`\n`,(0,i.jsx)(e.li,{children:\"Publish package if a release tag was created\"}),`\n`]}),`\n`,(0,i.jsx)(\"a\",{id:\"org521573d\"}),`\n`,(0,i.jsxs)(e.h2,{id:\"creating-the-action-configuration\",children:[(0,i.jsx)(e.a,{className:\"anchor\",href:\"#creating-the-action-configuration\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating the Action Configuration\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Create the file \",(0,i.jsx)(e.code,{children:\".github/workflows/workflow.yml\"})]}),`\n`,(0,i.jsx)(\"a\",{id:\"org9bc8afb\"}),`\n`,(0,i.jsxs)(e.h3,{id:\"checking-for-tag\",children:[(0,i.jsx)(e.a,{className:\"anchor\",href:\"#checking-for-tag\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"Checking for Tag\"]}),`\n`,(0,i.jsx)(e.p,{children:\"This method simply builds and tests the package on any commit.\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"Then if it finds a tag starting with \",(0,i.jsx)(e.strong,{children:\"v\"}),\", it will trigger a deploy.\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"So if a \",(0,i.jsx)(e.a,{href:\"https://help.github.com/en/articles/creating-releases\",children:\"GitHub Release\"}),\" is created with the tag \",(0,i.jsx)(e.strong,{children:\"v2.3.4\"}),\", it will trigger a deploy.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"This is a bit naive however for my purposes I usually don't tag unless its a release.\"}),`\n`,(0,i.jsx)(e.p,{children:\"One advantage of checking for a tag this way is that it cuts down on unneeded builds as a whole build can only ever run 1 or 2 times (2 in the case a build is deployed).\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"The \",(0,i.jsx)(e.a,{href:\"https://github.com/features/actions\",children:\"GitHub Actions\"}),\" docs mentions being able to \",(0,i.jsx)(e.a,{href:\"https://help.github.com/en/articles/workflow-syntax-for-github-actions#example-restricting-the-workflow-run-to-specific-refs-and-paths\",children:\"restrict actions\"}),\" to certain branches or tags however I could not get this to work.\"]}),`\n`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light catppuccin-mocha\",style:{backgroundColor:\"#fff\",\"--shiki-dark-bg\":\"#1e1e2e\",color:\"#24292e\",\"--shiki-dark\":\"#cdd6f4\"},tabIndex:\"0\",children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" build\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Name Action Build\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\"}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#005CC5\",\"--shiki-dark\":\"#FAB387\"},children:\"on\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\" [\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\"push\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"]\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"  # Trigger on push\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\"}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"jobs\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"  run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"    runs-on\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" ubuntu-latest\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                         # Run on Ubuntu Docker image\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"    steps\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Checkout Repo\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                          # Checkout repo\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      uses\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" actions/checkout@v1\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Use Node.js\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                            # Configure Node.js\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      uses\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" actions/setup-node@v1\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      with\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        node-version\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" '12.9'\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                       # Set Node.js Version\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        registry-url\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" 'https://registry.npmjs.org'\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Set Node.js reigistry\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Deploy Info\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                            # Print GitHub Deploy info\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      env\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        GITHUB_CONTEXT\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" ${{ toJson(github) }}\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:' echo \"$GITHUB_CONTEXT\"'})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Install\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                                # Install dependancies\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm install\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Build\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                                  # Build app if needed\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm run build --if-present\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Test\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm run test --if-present\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"               # Run tests if needed\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Publish\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      if\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" startsWith(github.ref, 'refs/tags/v')\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"    # Check if publish step should run\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm publish --access public\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"             # Publish package\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      env\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        NODE_AUTH_TOKEN\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" ${{ secrets.NPM_AUTH_TOKEN }}\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Set NPM auth token from GitHub Secrets\"})]})]})})}),`\n`,(0,i.jsx)(\"a\",{id:\"org2d248b4\"}),`\n`,(0,i.jsxs)(e.h3,{id:\"checking-for-a-release\",children:[(0,i.jsx)(e.a,{className:\"anchor\",href:\"#checking-for-a-release\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"Checking for a Release\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"If you found the previous method too naive, you may want to check for a \",(0,i.jsx)(e.a,{href:\"https://help.github.com/en/articles/creating-releases\",children:\"GitHub Release\"}),\" before triggering a deploy.\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"The drawback to this is that a few extraneous builds will be triggered as the \",(0,i.jsx)(e.code,{children:\"release\"}),\" event will fire both when the release is \",(0,i.jsx)(e.code,{children:\"created\"}),\" and \",(0,i.jsx)(e.code,{children:\"published\"}),\".  As far as I am aware this can not be restricted using the \",(0,i.jsx)(e.code,{children:\"on\"}),\" property.\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"To ensure we only deploy once, we will indicate to only run the \",(0,i.jsx)(e.strong,{children:\"Publish\"}),\" step when a release is \",(0,i.jsx)(e.code,{children:\"published\"}),\".\"]}),`\n`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light catppuccin-mocha\",style:{backgroundColor:\"#fff\",\"--shiki-dark-bg\":\"#1e1e2e\",color:\"#24292e\",\"--shiki-dark\":\"#cdd6f4\"},tabIndex:\"0\",children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" build\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\"}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#005CC5\",\"--shiki-dark\":\"#FAB387\"},children:\"on\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"  push\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"     # Run build on push (commit in most cases)\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"    tag\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\" []\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Only run build if not tagged\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"  release\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"  # Run build on release\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"    tag\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" v*\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"    # Check for release tag\"})]}),`\n`,(0,i.jsx)(e.span,{className:\"line\"}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"jobs\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"  run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"    runs-on\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" ubuntu-latest\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                         # Run on Ubuntu Docker image\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"    steps\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Checkout Repo\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                          # Checkout repo\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      uses\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" actions/checkout@v1\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Use Node.js\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                            # Configure Node.js\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      uses\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" actions/setup-node@v1\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      with\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        node-version\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" '12.9'\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                       # Set Node.js Version\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        registry-url\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" 'https://registry.npmjs.org'\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Set Node.js reigistry\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Deploy Info\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                            # Print GitHub Deploy info\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      env\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        GITHUB_CONTEXT\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" ${{ toJson(github) }}\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:' echo \"$GITHUB_CONTEXT\"'})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Install\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                                # Install dependancies\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm install\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Build\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"                                  # Build app if needed\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm run build --if-present\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Test\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm run test --if-present\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"               # Run tests if needed\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"    -\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\" name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" Publish\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      if\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" github.event_name == 'release' \u0026\u0026 github.event.action == 'published'\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Check if publish step should run\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      run\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" npm publish --access public\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\"             # Publish package\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"      env\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"})]}),`\n`,(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"        NODE_AUTH_TOKEN\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\":\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-dark\":\"#A6E3A1\"},children:\" ${{ secrets.NPM_AUTH_TOKEN }}\"}),(0,i.jsx)(e.span,{style:{color:\"#6A737D\",\"--shiki-light-font-style\":\"inherit\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-font-style\":\"italic\"},children:\" # Set NPM auth token from GitHub Secrets\"})]})]})})}),`\n`,(0,i.jsx)(\"a\",{id:\"org515fedd\"}),`\n`,(0,i.jsxs)(e.h2,{id:\"setting-npm-auth-token-secret\",children:[(0,i.jsx)(e.a,{className:\"anchor\",href:\"#setting-npm-auth-token-secret\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"Setting NPM Auth Token Secret\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Simply go to your repo \",(0,i.jsx)(e.strong,{children:\"Settings\"}),\" and select the \",(0,i.jsx)(e.strong,{children:\"Secrets\"}),\" tab.\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Then \",(0,i.jsx)(e.strong,{children:\"Add a new secret\"}),\" with the \",(0,i.jsx)(e.strong,{children:\"Name\"}),\" of \",(0,i.jsx)(e.code,{children:\"NPM_AUTH_TOKEN\"}),\" and set the \",(0,i.jsx)(e.strong,{children:\"Value\"}),\" to your \",(0,i.jsx)(e.a,{href:\"https://docs.npmjs.com/creating-and-viewing-authentication-tokens\",children:\"NPM token\"}),\".\"]}),`\n`,(0,i.jsx)(\"a\",{id:\"org5d470fc\"}),`\n`,(0,i.jsxs)(e.h2,{id:\"adding-the-github-actions-badge\",children:[(0,i.jsx)(e.a,{className:\"anchor\",href:\"#adding-the-github-actions-badge\",children:(0,i.jsx)(e.span,{className:\"icon icon-link\"})}),\"Adding the GitHub Actions badge\"]}),`\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:\"http://github.com\",children:\"GitHub\"}),\" now offers an undocumented API which will return nice \",(0,i.jsx)(e.a,{href:\"https://travis-ci.org/\",children:\"Travis CI\"}),\" like status badge.\"]}),`\n`,(0,i.jsxs)(e.p,{children:[\"An example can be seen on the \",(0,i.jsx)(e.a,{href:\"https://github.com/actions/toolkit\",children:\"actions/toolkit\"}),\" repo.\"]}),`\n`,(0,i.jsx)(e.p,{children:\"The format for the API is as follows:\"}),`\n`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light catppuccin-mocha\",style:{backgroundColor:\"#fff\",\"--shiki-dark-bg\":\"#1e1e2e\",color:\"#24292e\",\"--shiki-dark\":\"#cdd6f4\"},tabIndex:\"0\",children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#CDD6F4\"},children:\"https://github.com/\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\"\u003c\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"user|org\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\"\u003e\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#CDD6F4\"},children:\"/\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\"\u003c\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"repo\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\"\u003e\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#CDD6F4\"},children:\"/\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\"\u003c\"}),(0,i.jsx)(e.span,{style:{color:\"#22863A\",\"--shiki-dark\":\"#89B4FA\"},children:\"action_name\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#94E2D5\"},children:\"\u003e\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#CDD6F4\"},children:\"/badge.svg\"})]})})})}),`\n`,(0,i.jsxs)(e.p,{children:[\"The \",(0,i.jsx)(e.code,{children:\"action_name\"}),\" propery is the \",(0,i.jsx)(e.code,{children:\"name\"}),\" field in the \",(0,i.jsx)(e.a,{href:\"https://yaml.org/\",children:\"YAML\"}),\" which in this case is \",(0,i.jsx)(e.code,{children:\"build\"}),\".\"]}),`\n`,(0,i.jsx)(e.p,{children:\"An example of this would be:\"}),`\n`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light catppuccin-mocha\",style:{backgroundColor:\"#fff\",\"--shiki-dark-bg\":\"#1e1e2e\",color:\"#24292e\",\"--shiki-dark\":\"#cdd6f4\"},tabIndex:\"0\",children:(0,i.jsx)(e.code,{children:(0,i.jsx)(e.span,{className:\"line\",children:(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#CDD6F4\"},children:\"https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg\"})})})})}),`\n`,(0,i.jsx)(e.p,{children:\"To make it even nicer we can link the badge to our repo's actions page:\"}),`\n`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:\"shiki shiki-themes github-light catppuccin-mocha\",style:{backgroundColor:\"#fff\",\"--shiki-dark-bg\":\"#1e1e2e\",color:\"#24292e\",\"--shiki-dark\":\"#cdd6f4\"},tabIndex:\"0\",children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:\"line\",children:[(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#B4BEFE\"},children:\"[\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#89B4FA\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\"![\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#A6E3A1\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\"img\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#89B4FA\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\"]\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#89B4FA\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\"https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg\"}),(0,i.jsx)(e.span,{style:{color:\"#032F62\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#9399B2\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\")\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#B4BEFE\"},children:\"]\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\"(\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-light-text-decoration\":\"underline\",\"--shiki-dark\":\"#89B4FA\",\"--shiki-dark-text-decoration\":\"inherit\"},children:\"https://github.com/woofers/ludum-dare-badges/actions\"}),(0,i.jsx)(e.span,{style:{color:\"#24292E\",\"--shiki-dark\":\"#9399B2\"},children:\")\"})]})})})}),`\n`,(0,i.jsx)(e.p,{children:\"It will look something like this:\"})]})}function d(s={}){let{wrapper:e}=s.components||{};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(o,{...s})}):o(s)}return f(B);})();\n;return Component;"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"_1mtlrut1 _1mtlrut0\",\"style\":{},\"ref\":\"$undefined\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mm062y5r mm062y5s\",\"style\":{\"--mm062y5o\":\"20px\",\"--mm062y5p\":\"120px\"},\"ref\":\"$undefined\",\"aria-hidden\":true,\"children\":\"$undefined\"}],[\"$\",\"main\",null,{\"className\":\"_1mtlrut2\",\"style\":{},\"ref\":\"$undefined\",\"children\":[[\"$\",\"$5\",null,{\"default\":\"none\",\"share\":\"slide-in\",\"enter\":\"none\",\"name\":\"blog-title-yaml-github-actions\",\"children\":[\"$\",\"$L15\",null,{\"href\":\"/\",\"altLabel\":\"\u003c-- Back\",\"ariaLabel\":\"Back to homepage\",\"marginBottom\":\"$$400\",\"children\":\"NPM package deployment using YAML GitHub Actions\"}]}],[\"$\",\"time\",null,{\"className\":\"mm062y29 mm062y8o mm062y69 mm062y63 mm062y3\",\"style\":{\"--mm062y26\":\"var(--space-200)\",\"--mm062y66\":\"15px\",\"--mm062y60\":\"medium\",\"--mm062y0\":\"var(--color-text-primary)\"},\"ref\":\"$undefined\",\"dateTime\":\"2019-08-21T00:00:00.000Z\",\"title\":\"Tuesday, August 20, 2019\",\"children\":\"August 20, 2019\"}],[\"$\",\"$L16\",null,{\"code\":\"$17\"}]]}]]}]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1, viewport-fit=cover\"}],[\"$\",\"meta\",\"2\",{\"name\":\"theme-color\",\"content\":\"#f9f9f9\"}]]\nd:null\n"])</script><script>self.__next_f.push([1,"18:I[4430,[],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"f:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"NPM package deployment using YAML GitHub Actions | Jaxson Van Doorn\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"All-around developer, half-designer and tinkerer.\"}],[\"$\",\"link\",\"2\",{\"rel\":\"manifest\",\"href\":\"/manifest.webmanifest\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"meta\",\"3\",{\"name\":\"creator\",\"content\":\"Jaxson Van Doorn\"}],[\"$\",\"meta\",\"4\",{\"name\":\"publisher\",\"content\":\"Jaxson Van Doorn\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"Jaxson Van Doorn\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"All-around developer, half-designer and tinkerer.\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image:type\",\"content\":\"image/png\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image\",\"content\":\"https://jaxs.onl/meta-image.png\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:image:alt\",\"content\":\"Cover image for jaxs.onl\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:creator\",\"content\":\"@jaxsonvandoorn\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:title\",\"content\":\"NPM package deployment using YAML GitHub Actions\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:description\",\"content\":\"All-around developer, half-designer and tinkerer.\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:image\",\"content\":\"https://jaxs.onl/meta-image.png\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:image:alt\",\"content\":\"Cover image for jaxs.onl\"}],[\"$\",\"link\",\"18\",{\"rel\":\"shortcut icon\",\"href\":\"/favicon.png\"}],[\"$\",\"link\",\"19\",{\"rel\":\"icon\",\"href\":\"/favicon.png\"}],[\"$\",\"link\",\"20\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-32x32.png\",\"sizes\":\"32x32\",\"type\":\"image/png\"}],[\"$\",\"link\",\"21\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-48x48.png\",\"sizes\":\"48x48\",\"type\":\"image/png\"}],[\"$\",\"link\",\"22\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-72x72.png\",\"sizes\":\"72x72\",\"type\":\"image/png\"}],[\"$\",\"link\",\"23\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-144x144.png\",\"sizes\":\"144x144\",\"type\":\"image/png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-192x192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\"}],[\"$\",\"link\",\"25\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-256x256.png\",\"sizes\":\"256x256\",\"type\":\"image/png\"}],[\"$\",\"link\",\"26\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-384x384.png\",\"sizes\":\"384x384\",\"type\":\"image/png\"}],[\"$\",\"link\",\"27\",{\"rel\":\"apple-touch-icon\",\"href\":\"/icons/mask-512x512.png\",\"sizes\":\"512x512\",\"type\":\"image/png\"}],[\"$\",\"$L18\",\"28\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"14:\"$f:metadata\"\n"])</script></body></html>