<!DOCTYPE html><html lang="en" class="no-js"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/><link rel="icon" href="/favicon.png"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-status-bar-style" content="default"/><meta name="theme-color" content="#f1f5f9"/><meta name="msapplication-navbutton-color" content="#f1f5f9"/><title>NPM package deployment using YAML GitHub Actions | Jaxson Van Doorn</title><meta name="description" content="All-around developer, half-designer and tinkerer."/><meta property="og:title" content="NPM package deployment using YAML GitHub Actions"/><meta property="og:description" content="All-around developer, half-designer and tinkerer."/><meta property="og:type" content="website"/><meta property="og:image" content="https://og.jaxs.onl/**NPM package deployment using YAML GitHub Actions**.png?&amp;md=1&amp;images=https://og.jaxs.onl/jvd.png&amp;widths=300&amp;heights=300"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="Jaxson Van Doorn"/><meta name="twitter:title" content="NPM package deployment using YAML GitHub Actions"/><meta name="twitter:description" content="All-around developer, half-designer and tinkerer."/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="32x32" href="/icons/mask-32x32.png"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/mask-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/mask-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/mask-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/mask-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/mask-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/mask-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/mask-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/mask-512x512.png"/><meta name="next-head-count" content="27"/><script type="text/javascript">document.documentElement.className = 'js'</script><style id="stitches">--sxs{--sxs:0 t-igapDf}@media{:root,.t-igapDf{--colors-inherit:inherit;--colors-current:currentColor;--colors-transparent:transparent;--colors-black:#000;--colors-white:#fff;--colors-slate50:#f8fafc;--colors-slate100:#f1f5f9;--colors-slate200:#e2e8f0;--colors-slate300:#cbd5e1;--colors-slate400:#94a3b8;--colors-slate500:#64748b;--colors-slate600:#475569;--colors-slate700:#334155;--colors-slate800:#1e293b;--colors-slate900:#0f172a;--colors-gray50:#f9fafb;--colors-gray100:#f3f4f6;--colors-gray200:#e5e7eb;--colors-gray300:#d1d5db;--colors-gray400:#9ca3af;--colors-gray500:#6b7280;--colors-gray600:#4b5563;--colors-gray700:#374151;--colors-gray800:#1f2937;--colors-gray900:#111827;--colors-zinc50:#fafafa;--colors-zinc100:#f4f4f5;--colors-zinc200:#e4e4e7;--colors-zinc300:#d4d4d8;--colors-zinc400:#a1a1aa;--colors-zinc500:#71717a;--colors-zinc600:#52525b;--colors-zinc700:#3f3f46;--colors-zinc800:#27272a;--colors-zinc900:#18181b;--colors-neutral50:#fafafa;--colors-neutral100:#f5f5f5;--colors-neutral200:#e5e5e5;--colors-neutral300:#d4d4d4;--colors-neutral400:#a3a3a3;--colors-neutral500:#737373;--colors-neutral600:#525252;--colors-neutral700:#404040;--colors-neutral800:#262626;--colors-neutral900:#171717;--colors-stone50:#fafaf9;--colors-stone100:#f5f5f4;--colors-stone200:#e7e5e4;--colors-stone300:#d6d3d1;--colors-stone400:#a8a29e;--colors-stone500:#78716c;--colors-stone600:#57534e;--colors-stone700:#44403c;--colors-stone800:#292524;--colors-stone900:#1c1917;--colors-red50:#fef2f2;--colors-red100:#fee2e2;--colors-red200:#fecaca;--colors-red300:#fca5a5;--colors-red400:#f87171;--colors-red500:#ef4444;--colors-red600:#dc2626;--colors-red700:#b91c1c;--colors-red800:#991b1b;--colors-red900:#7f1d1d;--colors-orange50:#fff7ed;--colors-orange100:#ffedd5;--colors-orange200:#fed7aa;--colors-orange300:#fdba74;--colors-orange400:#fb923c;--colors-orange500:#f97316;--colors-orange600:#ea580c;--colors-orange700:#c2410c;--colors-orange800:#9a3412;--colors-orange900:#7c2d12;--colors-amber50:#fffbeb;--colors-amber100:#fef3c7;--colors-amber200:#fde68a;--colors-amber300:#fcd34d;--colors-amber400:#fbbf24;--colors-amber500:#f59e0b;--colors-amber600:#d97706;--colors-amber700:#b45309;--colors-amber800:#92400e;--colors-amber900:#78350f;--colors-yellow50:#fefce8;--colors-yellow100:#fef9c3;--colors-yellow200:#fef08a;--colors-yellow300:#fde047;--colors-yellow400:#facc15;--colors-yellow500:#eab308;--colors-yellow600:#ca8a04;--colors-yellow700:#a16207;--colors-yellow800:#854d0e;--colors-yellow900:#713f12;--colors-lime50:#f7fee7;--colors-lime100:#ecfccb;--colors-lime200:#d9f99d;--colors-lime300:#bef264;--colors-lime400:#a3e635;--colors-lime500:#84cc16;--colors-lime600:#65a30d;--colors-lime700:#4d7c0f;--colors-lime800:#3f6212;--colors-lime900:#365314;--colors-green50:#f0fdf4;--colors-green100:#dcfce7;--colors-green200:#bbf7d0;--colors-green300:#86efac;--colors-green400:#4ade80;--colors-green500:#22c55e;--colors-green600:#16a34a;--colors-green700:#15803d;--colors-green800:#166534;--colors-green900:#14532d;--colors-emerald50:#ecfdf5;--colors-emerald100:#d1fae5;--colors-emerald200:#a7f3d0;--colors-emerald300:#6ee7b7;--colors-emerald400:#34d399;--colors-emerald500:#10b981;--colors-emerald600:#059669;--colors-emerald700:#047857;--colors-emerald800:#065f46;--colors-emerald900:#064e3b;--colors-teal50:#f0fdfa;--colors-teal100:#ccfbf1;--colors-teal200:#99f6e4;--colors-teal300:#5eead4;--colors-teal400:#2dd4bf;--colors-teal500:#14b8a6;--colors-teal600:#0d9488;--colors-teal700:#0f766e;--colors-teal800:#115e59;--colors-teal900:#134e4a;--colors-cyan50:#ecfeff;--colors-cyan100:#cffafe;--colors-cyan200:#a5f3fc;--colors-cyan300:#67e8f9;--colors-cyan400:#22d3ee;--colors-cyan500:#06b6d4;--colors-cyan600:#0891b2;--colors-cyan700:#0e7490;--colors-cyan800:#155e75;--colors-cyan900:#164e63;--colors-sky50:#f0f9ff;--colors-sky100:#e0f2fe;--colors-sky200:#bae6fd;--colors-sky300:#7dd3fc;--colors-sky400:#38bdf8;--colors-sky500:#0ea5e9;--colors-sky600:#0284c7;--colors-sky700:#0369a1;--colors-sky800:#075985;--colors-sky900:#0c4a6e;--colors-blue50:#eff6ff;--colors-blue100:#dbeafe;--colors-blue200:#bfdbfe;--colors-blue300:#93c5fd;--colors-blue400:#60a5fa;--colors-blue500:#3b82f6;--colors-blue600:#2563eb;--colors-blue700:#1d4ed8;--colors-blue800:#1e40af;--colors-blue900:#1e3a8a;--colors-indigo50:#eef2ff;--colors-indigo100:#e0e7ff;--colors-indigo200:#c7d2fe;--colors-indigo300:#a5b4fc;--colors-indigo400:#818cf8;--colors-indigo500:#6366f1;--colors-indigo600:#4f46e5;--colors-indigo700:#4338ca;--colors-indigo800:#3730a3;--colors-indigo900:#312e81;--colors-violet50:#f5f3ff;--colors-violet100:#ede9fe;--colors-violet200:#ddd6fe;--colors-violet300:#c4b5fd;--colors-violet400:#a78bfa;--colors-violet500:#8b5cf6;--colors-violet600:#7c3aed;--colors-violet700:#6d28d9;--colors-violet800:#5b21b6;--colors-violet900:#4c1d95;--colors-purple50:#faf5ff;--colors-purple100:#f3e8ff;--colors-purple200:#e9d5ff;--colors-purple300:#d8b4fe;--colors-purple400:#c084fc;--colors-purple500:#a855f7;--colors-purple600:#9333ea;--colors-purple700:#7e22ce;--colors-purple800:#6b21a8;--colors-purple900:#581c87;--colors-fuchsia50:#fdf4ff;--colors-fuchsia100:#fae8ff;--colors-fuchsia200:#f5d0fe;--colors-fuchsia300:#f0abfc;--colors-fuchsia400:#e879f9;--colors-fuchsia500:#d946ef;--colors-fuchsia600:#c026d3;--colors-fuchsia700:#a21caf;--colors-fuchsia800:#86198f;--colors-fuchsia900:#701a75;--colors-pink50:#fdf2f8;--colors-pink100:#fce7f3;--colors-pink200:#fbcfe8;--colors-pink300:#f9a8d4;--colors-pink400:#f472b6;--colors-pink500:#ec4899;--colors-pink600:#db2777;--colors-pink700:#be185d;--colors-pink800:#9d174d;--colors-pink900:#831843;--colors-rose50:#fff1f2;--colors-rose100:#ffe4e6;--colors-rose200:#fecdd3;--colors-rose300:#fda4af;--colors-rose400:#fb7185;--colors-rose500:#f43f5e;--colors-rose600:#e11d48;--colors-rose700:#be123c;--colors-rose800:#9f1239;--colors-rose900:#881337;--colors-transparentPanel:hsl(0 0% 0% / 97%);--colors-shadowLight:hsl(206 22% 7% / 35%);--colors-shadowDark:hsl(206 22% 7% / 20%);--colors-shadow:238deg 60% 40%;--fonts-cabin:Cabin, sans-serif;--fonts-sansSerif:AlbertSans, sans-serif;--fonts-untitled:Untitled Sans, -apple-system, system-ui, sans-serif;--fonts-mono:SÃ¶hne Mono, menlo, monospace;--space-0:0px;--space-1:4px;--space-2:8px;--space-3:12px;--space-4:16px;--space-5:24px;--space-6:32px;--space-7:36px;--space-8:44px;--space-9:64px;--space-10:84px;--sizes-0:0px;--sizes-1:4px;--sizes-2:8px;--sizes-3:12px;--sizes-4:16px;--sizes-5:24px;--sizes-6:32px;--sizes-7:36px;--sizes-8:44px;--sizes-9:64px;--sizes-10:84px;--fontSizes-overline:17.1429px;--fontSizes-body2:11.4286px;--fontSizes-subtitle2:11.4286px;--fontSizes-button:17.1429px;--fontSizes-body1:17.1429px;--fontSizes-subtitle1:17.1429px;--fontSizes-h6:22.8571px;--fontSizes-h5:28.5714px;--fontSizes-h4:34.2857px;--fontSizes-h3:45.7143px;--fontSizes-h2:62.8571px;--fontSizes-h1:91.4286px;--fontWeights-thin:100;--fontWeights-extraLight:200;--fontWeights-light:300;--fontWeights-regular:400;--fontWeights-medium:500;--fontWeights-semiBold:600;--fontWeights-bold:700;--fontWeights-extraBold:800;--fontWeights-black:900;--lineHeights-overline:20px;--lineHeights-body2:16px;--lineHeights-subtitle2:16px;--lineHeights-button:24px;--lineHeights-body1:28px;--lineHeights-subtitle1:24px;--lineHeights-h6:28px;--lineHeights-h5:32px;--lineHeights-h4:44px;--lineHeights-h3:52px;--lineHeights-h2:68px;--lineHeights-h1:96px;--letterSpacings-overline:1.5px;--letterSpacings-body2:0.25px;--letterSpacings-subtitle2:0.1px;--letterSpacings-button:-0.35px;--letterSpacings-body1:0.5px;--letterSpacings-subtitle1:0.15px;--letterSpacings-h6:0.15px;--letterSpacings-h5:0px;--letterSpacings-h4:0.5px;--letterSpacings-h3:0px;--letterSpacings-h2:-0.5px;--letterSpacings-h1:-1.5px;--radii-1:3px;--radii-2:4px;--radii-3:8px;--radii-4:16px;--radii-round:50%;--radii-pill:9999px;--shadows-small:0.5px 1px 1px hsl(var(--colors-shadow) / 0.7);--shadows-medium:
        1px 2px 2px hsl(var(--colors-shadow) / 0.15),
        2px 4px 4px hsl(var(--colors-shadow) / 0.15)
      ;--shadows-large:
        1px 2px 2px hsl(var(--colors-shadow) / 0.2),
        2px 4px 4px hsl(var(--colors-shadow) / 0.2),
        4px 8px 8px hsl(var(--colors-shadow) / 0.2),
        8px 16px 16px hsl(var(--colors-shadow) / 0.2),
        16px 32px 32px hsl(var(--colors-shadow) / 0.2)
      ;--zIndices-1:100;--zIndices-2:200;--zIndices-3:300;--zIndices-4:400;--zIndices-max:999}}--sxs{--sxs:1 FRmFz eZqbhS}@media{@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Thin.woff2') format('woff2');font-weight:100;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Thin'Italic'.woff2') format('woff2');font-weight:100;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-ExtraLight.woff2') format('woff2');font-weight:200;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-ExtraLight'Italic'.woff2') format('woff2');font-weight:200;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Light.woff2') format('woff2');font-weight:300;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Light'Italic'.woff2') format('woff2');font-weight:300;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Regular.woff2') format('woff2');font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-'Italic'.woff2') format('woff2');font-weight:400;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Medium.woff2') format('woff2');font-weight:500;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Medium'Italic'.woff2') format('woff2');font-weight:500;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-SemiBold.woff2') format('woff2');font-weight:600;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-SemiBold'Italic'.woff2') format('woff2');font-weight:600;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Bold.woff2') format('woff2');font-weight:700;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Bold'Italic'.woff2') format('woff2');font-weight:700;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-ExtraBold.woff2') format('woff2');font-weight:800;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-ExtraBold'Italic'.woff2') format('woff2');font-weight:800;font-style:italic;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Black.woff2') format('woff2');font-weight:900;font-style:normal;font-display:swap}@font-face{font-family:AlbertSans;src:url('/fonts/albertsans/AlbertSans-Black'Italic'.woff2') format('woff2');font-weight:900;font-style:italic;font-display:swap}*,*::before,*::after{box-sizing:border-box}*{margin:0;padding:0}html,body{height:100%}body{line-height:1.5;-webkit-font-smoothing:antialiased;background:#f1f5f9;color:var(--colors-slate700);overscroll-behavior-y:none}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{overflow-wrap:break-word}#root,#__next{min-height:100vh;isolation:isolate}.no-js *[style]{opacity:1 !important;transform:none !important}.no-js .slide-in{height:368px !important}p{margin:0;padding:0}img{max-width:100%;margin:0;padding:0;border-radius:25px}a{display:inline-block;text-decoration:none;color:inherit}abbr{text-decoration:none;cursor:help}ul{margin:0;list-style-type:none;list-style-position:outside;list-style-image:none}li{padding-left:0;margin-bottom:0.8rem}pre{margin:0;margin-bottom:8px;font-size:0.85rem;line-height:1.42;overflow:auto;word-wrap:normal;padding:1.6rem;background:#2d2833;color:#aaaaca}pre[class*='language-']{background:#2d2833 !important;font-size:0.95em !important;color:#aaaaca}blockquote{padding:0 0 0 20px;margin:0px 0px 12px 8px;border-left:4px solid #f27052}blockquote *:last-of-type{margin:0;padding:0}.hljs-comment{color:#787890}.hljs-bullet{color:#8b8bb1}.hljs-string{color:#dd672c}.hljs-keyword,.hljs-name,.hljs-link{color:#fe8c52}.hljs-attr{color:#aaaaca}.language-yaml .hljs-attr{color:#fe8c52}.language-yaml .hljs-string{color:#aaaaca}::selection{background:#ffab7f !important;color:var(--colors-slate800) !important}}--sxs{--sxs:2 c-cmpvrW c-heCIvr c-bbjVtR c-PJLV c-jSUoYd c-gaCxRJ c-eedoXB c-kOfWMu c-lkBNdM c-joZAf c-deYohn c-SFHOw c-cIdiJW c-eYSuNY c-oGpVM c-cmGLFA c-jWBVEc c-dhzjXW c-dpPLDk c-gGPYRr c-cjjJSo c-bOROyB c-jdxJHo c-ebfadt c-hbRgnK c-ibwjJe c-gyCSvi c-eXdOSC c-gLCtMH c-cakYZb c-llSbgT c-dnxkO c-lictOd c-boHetS c-jVHEzo c-jgSQru c-jpcrOZ c-bqyktt c-Hllq c-jkHsGW}@media{.c-cmpvrW{position:relative}.c-heCIvr{z-index:3;position:relative}.c-bbjVtR{color:var(--colors-slate800)}.c-eedoXB{background:rgb(213 217 223);width:100%;height:100%}.c-gaCxRJ{width:100%;max-width:calc(1180px + 40px);left:50%;transform:translateX(-50%);padding-left:var(---px);padding-right:var(---px);z-index:30;position:absolute;height:1px;display:none}@media (min-width: 640px){.c-gaCxRJ{display:block}}.c-kOfWMu{border-bottom:1px solid rgb(213 217 223);position:relative;z-index:5;background:#f1f5f9;overflow-x:hidden;overflow-y:auto;color:var(--colors-gray700);width:100%;height:100%;margin-left:auto;margin-right:auto;padding-left:12px;padding-right:12px;padding-top:24px;padding-bottom:24px;---shadowColor:206deg 14% 54%;---shadowElevationLow:-0.5px 0.6px 1px hsl(var(---shadowColor) / 0.19),
    -0.9px 1.1px 1.8px -0.7px hsl(var(---shadowColor) / 0.29),
    -2px 2.4px 4.1px -1.3px hsl(var(---shadowColor) / 0.4)}@media (min-width: 640px){.c-kOfWMu{padding-top:var(--space-7);padding-bottom:var(--space-7);padding-left:var(--space-7);padding-right:var(--space-7);border-bottom:none;padding-right:calc(max((100vw - 1180px) / 2, var(---px)) + var(--space-7))}}.c-lkBNdM{height:100%}.c-deYohn{position:absolute;right:0;width:50%;padding-left:var(--space-3);padding-right:var(--space-3);padding-top:0;padding-bottom:0;display:flex;align-items:center;justify-content:space-between;font-size:18px;height:54px}.c-SFHOw{display:flex;align-items:center;justify-content:flex-end}.c-cIdiJW{text-decoration:none}.c-eYSuNY{display:inline-flex;align-items:center;justify-content:center;border-radius:8px;min-width:38px;height:38px;padding:8px;gap:0 8px;transition:background-color 300ms ease 0s}.c-eYSuNY:hover{background-color:rgba(55, 65, 81, 0.07)}.c-oGpVM{margin:0;font-family:var(--fonts-sansSerif);color:var(--colors-current)}.c-joZAf{position:relative;z-index:2}.c-joZAf > div:first-of-type{padding-right:calc(max((100vw - 1180px) / 2, var(---px)) + 12px)}.c-jSUoYd{---px:0px;position:fixed;inset:0;width:100%;height:100%;padding:max(12vh, 0px) 0px max(30vh, 54px) max((100vw - 1180px) / 2, var(---px))}@media (min-width: 640px){.c-jSUoYd{---px:20px}}.c-cmGLFA{position:absolute;left:0;width:100%;padding-left:var(--space-3);padding-right:var(--space-3);padding-top:0;padding-bottom:0;display:flex;align-items:center;justify-content:space-between;font-size:18px;height:54px}.c-jWBVEc{box-sizing:border-box;margin:0;min-width:0}.c-dhzjXW{display:flex}.c-dpPLDk{position:relative;padding-bottom:24px}.c-gGPYRr{display:flex;align-items:flex-end;flex-direction:column;gap:var(--space-2) 0}@media (min-width: 640px){.c-gGPYRr{gap:var(--space-3) 0}}.c-cjjJSo{background:#e9eef4;background-image:url(/me/jaxson-new.webp);background-position:100% 50%;transition:background-image 0.25s ease-in-out;background-size:100%;border-radius:35%;min-width:68px;min-height:68px;width:68px;height:68px}@media (min-width: 640px){.c-cjjJSo{min-width:90px;min-height:90px;width:90px;height:90px}}.c-bOROyB{display:grid;grid-template-columns:repeat(1, minmax(0px, 1fr));position:relative;grid-gap:16px 52px}@media (min-width: 640px){.c-bOROyB{grid-template-columns:minmax(0px, 0.92fr) minmax(0px, 1fr)}}.c-jdxJHo{margin-top:-12px;margin-bottom:-12px;margin-left:-12px;margin-right:-12px}.c-ebfadt{padding-top:12px;padding-bottom:12px;padding-left:12px;padding-right:12px;overflow-y:hidden;overflow-x:hidden}.c-hbRgnK{position:relative;width:100%;will-change:margin-bottom, max-height}.c-ibwjJe{position:relative;width:100%;padding-top:0;padding-bottom:0;display:flex;flex-direction:column;color:var(--colors-gray400);gap:0}.c-gyCSvi{overflow:hidden;display:flex;align-items:flex-start;flex-direction:column;justify-content:space-between;gap:10px 0;padding:10px 12px;border-radius:11px;height:58px;background:#e9eef4}@media (min-width: 640px){.c-gyCSvi{gap:12px 0;padding:16px 24px;border-radius:14px;height:76px}}.c-eXdOSC{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;width:100%;display:block}.c-gLCtMH{display:inline-block;border-radius:0;margin-bottom:0;vertical-align:top}.c-cakYZb{position:absolute;top:0;left:0;width:100%;height:100%;background:none;border:none;cursor:pointer;z-index:105}.c-llSbgT{position:absolute;border:0;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;word-wrap:normal}.c-dnxkO{display:flex;flex-direction:column;gap:16px 0}@media (min-width: 640px){.c-dnxkO{position:sticky;top:0;max-height:416px}}.c-lictOd{color:var(--colors-blue500);transition:color 300ms ease 0s;text-decoration:none}.c-lictOd:hover{color:var(--colors-blue400)}.c-boHetS{height:60px}.c-jVHEzo{z-index:15;position:relative}.c-jgSQru{---feather:rgba(0, 0, 0, 0);---fadeMiddle:rgba(241, 245, 249, 0.4);---fadeColor:rgba(241, 245, 249, 1);width:100%;background:linear-gradient(0deg, var(---fadeColor) 0%, var(---fadeMiddle) 50%, var(---feather) 100%);bottom:0;right:20px;height:120px;position:absolute;z-index:3;opacity:1;min-height:120px;pointer-events:none;display:none}@media (min-width: 640px){.c-jgSQru{display:block}}.c-jpcrOZ{display:inline-flex;align-items:center;justify-content:center;border-radius:8px;width:38px;height:38px;transition:background-color 300ms ease 0s}.c-jpcrOZ:hover{background-color:rgba(55, 65, 81, 0.07)}.c-bqyktt h1:first-of-type{display:none}.c-bqyktt > div:first-of-type{display:flex;flex-direction:column;gap:12px 0}.c-bqyktt > div:first-of-type img{margin:0 auto}.c-Hllq{display:inline-block;margin-top:8px;margin-bottom:8px}.c-jkHsGW{margin-right:var(--space-2)}}--sxs{--sxs:3 c-gaCxRJ-hakyQ-border-top c-deYohn-ctiHJA-position-bottom c-oGpVM-kMxtTI-type-button c-oGpVM-aaKbT-noMargin-true c-cmGLFA-hCnnrI-position-top c-dhzjXW-ejCoEP-direction-row c-dhzjXW-awKDG-justify-start c-dhzjXW-jroWjL-align-center c-oGpVM-fZEawd-type-h6 c-gaCxRJ-gUKVcw-border-none c-dhzjXW-iTKOFX-direction-column c-dhzjXW-enOtL-align-normal c-dhzjXW-bICGYT-justify-center c-dhzjXW-JrrAq-align-start c-oGpVM-hJOsBT-type-body2 c-oGpVM-blWndS-type-h4 c-dhzjXW-knmidH-justify-between c-dhzjXW-igtkwp-align-end c-gLCtMH-drRrWM-size-small c-oGpVM-gPMmwr-type-body1 c-oGpVM-hYLUuc-type-h5}@media{.c-gaCxRJ-hakyQ-border-top{display:block}.c-deYohn-ctiHJA-position-bottom{top:0;width:100%}.c-oGpVM-kMxtTI-type-button{font-size:var(--fontSizes-button);letter-spacing:var(--letterSpacings-button);line-height:var(--lineHeights-button);font-weight:var(--fontWeights-semiBold);margin-bottom:var(--space-2);display:block}.c-oGpVM-kMxtTI-type-button::before{content:'';margin-bottom:-0.35em;display:table}.c-oGpVM-kMxtTI-type-button::after{content:'';margin-top:-0.35em;display:table}.c-oGpVM-aaKbT-noMargin-true{margin-bottom:0 !important}.c-cmGLFA-hCnnrI-position-top{bottom:0}.c-dhzjXW-ejCoEP-direction-row{flex-direction:row}.c-dhzjXW-awKDG-justify-start{justify-content:flex-start}.c-dhzjXW-jroWjL-align-center{align-items:center}.c-oGpVM-fZEawd-type-h6{font-size:var(--fontSizes-h6);font-weight:var(--fontWeights-semiBold);line-height:var(--lineHeights-h6);letter-spacing:var(--letterSpacings-h6);margin-bottom:var(--space-2)}.c-oGpVM-fZEawd-type-h6::before{content:'';margin-bottom:-0.2625em;display:table}.c-oGpVM-fZEawd-type-h6::after{content:'';margin-top:-0.2625em;display:table}.c-gaCxRJ-gUKVcw-border-none{dispaly:none}@media (min-width: 640px){.c-gaCxRJ-gUKVcw-border-none{display:block}}.c-dhzjXW-iTKOFX-direction-column{flex-direction:column}.c-dhzjXW-enOtL-align-normal{align-items:normal}.c-dhzjXW-bICGYT-justify-center{justify-content:center}.c-dhzjXW-JrrAq-align-start{align-items:flex-start}.c-oGpVM-hJOsBT-type-body2{font-size:var(--fontSizes-body2);letter-spacing:var(--letterSpacings-body2);font-weight:var(--fontWeights-regular);line-height:var(--lineHeights-body2);margin-bottom:var(--space-1)}.c-oGpVM-hJOsBT-type-body2::before{content:'';margin-bottom:-0.35em;display:table}.c-oGpVM-hJOsBT-type-body2::after{content:'';margin-top:-0.35em;display:table}.c-oGpVM-blWndS-type-h4{font-size:var(--fontSizes-h4);font-weight:var(--fontWeights-semiBold);line-height:var(--lineHeights-h4);letter-spacing:var(--letterSpacings-h4);margin-bottom:var(--space-3)}.c-oGpVM-blWndS-type-h4::before{content:'';margin-bottom:-0.2917em;display:table}.c-oGpVM-blWndS-type-h4::after{content:'';margin-top:-0.2917em;display:table}.c-dhzjXW-knmidH-justify-between{justify-content:space-between}.c-dhzjXW-igtkwp-align-end{align-items:flex-end}.c-gLCtMH-drRrWM-size-small{width:14px;height:14px}.c-oGpVM-gPMmwr-type-body1{font-size:var(--fontSizes-body1);font-weight:var(--fontWeights-regular);letter-spacing:var(--letterSpacings-body1);line-height:var(--lineHeights-body1);margin-bottom:var(--space-2)}.c-oGpVM-gPMmwr-type-body1::before{content:'';margin-bottom:-0.4667em;display:table}.c-oGpVM-gPMmwr-type-body1::after{content:'';margin-top:-0.4667em;display:table}.c-oGpVM-hYLUuc-type-h5{font-size:var(--fontSizes-h5);font-weight:var(--fontWeights-medium);line-height:var(--lineHeights-h5);letter-spacing:var(--letterSpacings-h5);margin-bottom:var(--space-2)}.c-oGpVM-hYLUuc-type-h5::before{content:'';margin-bottom:-0.21em;display:table}.c-oGpVM-hYLUuc-type-h5::after{content:'';margin-top:-0.21em;display:table}}--sxs{--sxs:4 c-dhzjXW-kqpaaf-justify-between c-dhzjXW-cSvKXL-align-normal c-oGpVM-dWXgdY-type-button c-oGpVM-dWnkuc-type-h3 c-oGpVM-iEbeDF-type-h6 c-oGpVM-fLyBeX-type-body1 c-gLCtMH-kxgnWE-size-normal}@media{@media (min-width: 640px){.c-dhzjXW-kqpaaf-justify-between{justify-content:space-between}}@media (min-width: 640px){.c-dhzjXW-cSvKXL-align-normal{align-items:normal}}@media (min-width: 640px){.c-oGpVM-dWXgdY-type-button{font-size:var(--fontSizes-button);letter-spacing:var(--letterSpacings-button);line-height:var(--lineHeights-button);font-weight:var(--fontWeights-semiBold);margin-bottom:var(--space-2);display:block}}@media (min-width: 640px){.c-oGpVM-dWXgdY-type-button::before{content:'';margin-bottom:-0.35em;display:table}}@media (min-width: 640px){.c-oGpVM-dWXgdY-type-button::after{content:'';margin-top:-0.35em;display:table}}@media (min-width: 640px){.c-oGpVM-dWnkuc-type-h3{font-size:var(--fontSizes-h3);font-weight:var(--fontWeights-bold);line-height:var(--lineHeights-h3);letter-spacing:var(--letterSpacings-h3);margin-bottom:var(--space-4)}}@media (min-width: 640px){.c-oGpVM-dWnkuc-type-h3::before{content:'';margin-bottom:-0.2188em;display:table}}@media (min-width: 640px){.c-oGpVM-dWnkuc-type-h3::after{content:'';margin-top:-0.2188em;display:table}}@media (min-width: 640px){.c-oGpVM-iEbeDF-type-h6{font-size:var(--fontSizes-h6);font-weight:var(--fontWeights-semiBold);line-height:var(--lineHeights-h6);letter-spacing:var(--letterSpacings-h6);margin-bottom:var(--space-2)}}@media (min-width: 640px){.c-oGpVM-iEbeDF-type-h6::before{content:'';margin-bottom:-0.2625em;display:table}}@media (min-width: 640px){.c-oGpVM-iEbeDF-type-h6::after{content:'';margin-top:-0.2625em;display:table}}@media (min-width: 640px){.c-oGpVM-fLyBeX-type-body1{font-size:var(--fontSizes-body1);font-weight:var(--fontWeights-regular);letter-spacing:var(--letterSpacings-body1);line-height:var(--lineHeights-body1);margin-bottom:var(--space-2)}}@media (min-width: 640px){.c-oGpVM-fLyBeX-type-body1::before{content:'';margin-bottom:-0.4667em;display:table}}@media (min-width: 640px){.c-oGpVM-fLyBeX-type-body1::after{content:'';margin-top:-0.4667em;display:table}}@media (min-width: 640px){.c-gLCtMH-kxgnWE-size-normal{width:20px;height:20px}}}--sxs{--sxs:6 c-oGpVM-idbzzBd-css c-jWBVEc-icCKeKr-css c-jWBVEc-ihPPDKw-css c-jWBVEc-ijUzogp-css c-jWBVEc-ikkCFLB-css c-oGpVM-ifWJntK-css c-jWBVEc-ihILFiV-css c-jWBVEc-ibPNjhd-css c-jWBVEc-ifibfeW-css c-jWBVEc-ifGHEql-css c-oGpVM-ijoUJTR-css c-jWBVEc-iiljIFz-css c-jWBVEc-idswiGA-css c-oGpVM-ifGHEql-css}@media{.c-oGpVM-idbzzBd-css{white-space:nowrap}.c-jWBVEc-icCKeKr-css{gap:0 6px}.c-jWBVEc-ihPPDKw-css{gap:20px 0;height:100%}@media (min-width: 640px){.c-jWBVEc-ihPPDKw-css{gap:40px 0}}.c-jWBVEc-ijUzogp-css{flex:0 0 60px;padding-left:var(--space-1);padding-right:var(--space-1)}@media (min-width: 640px){.c-jWBVEc-ijUzogp-css{padding-left:var(--space-1);padding-right:0}}.c-jWBVEc-ikkCFLB-css{padding-top:var(--space-2);gap:12px 0;display:none}@media (min-width: 640px){.c-jWBVEc-ikkCFLB-css{display:flex}}.c-oGpVM-ifWJntK-css{max-width:152px;display:block;opacity:0.7}@media (min-width: 640px){.c-oGpVM-ifWJntK-css{padding-top:0;max-width:unset;display:block;opacity:1}}.c-jWBVEc-ihILFiV-css{gap:0px 16px;height:60px}.c-jWBVEc-ibPNjhd-css{flex:1}.c-jWBVEc-ifibfeW-css{gap:16px 0}.c-jWBVEc-ifGHEql-css{width:100%}.c-oGpVM-ijoUJTR-css{white-space:nowrap;color:#6e7783}.c-jWBVEc-iiljIFz-css{gap:0 4px;height:16px}.c-jWBVEc-idswiGA-css{color:var(--colors-gray700)}.c-oGpVM-ifGHEql-css{width:100%}}</style><link rel="preload" href="/_next/static/css/95378c815dafb229.css" as="style"/><link rel="stylesheet" href="/_next/static/css/95378c815dafb229.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="/_next/static/chunks/117.bed0b300ac1b386f.js"></script><script defer="" src="/_next/static/chunks/568.c4f44755c3ee1bef.js"></script><script src="/_next/static/chunks/webpack-945fddfd4b869198.js" defer=""></script><script src="/_next/static/chunks/framework-fe99aa755573eedd.js" defer=""></script><script src="/_next/static/chunks/main-44a222b08c340ab2.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a94014c7b5d83202.js" defer=""></script><script src="/_next/static/chunks/993-a499a60d9c99304d.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bpost%5D-c46f53c5a4e55762.js" defer=""></script><script src="/_next/static/wmKsTZ9bCt_jMfM_KJ7C_/_buildManifest.js" defer=""></script><script src="/_next/static/wmKsTZ9bCt_jMfM_KJ7C_/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="c-cmpvrW"><div class="c-heCIvr"><div id="root-layout-wrapper" class="c-bbjVtR"><main class="c-PJLV"><div class="c-jSUoYd" style="top:0px;padding:max(12vh, 0px) 0px max(30vh, 54px) max((100vw - 1180px) / 2, var(---px))"><div class="c-joZAf" style="opacity:0;transform:translateX(0px) translateY(20px) translateZ(0)"><div class="c-cmGLFA c-cmGLFA-hCnnrI-position-top"><div class="c-jWBVEc c-dhzjXW c-dhzjXW-ejCoEP-direction-row c-dhzjXW-awKDG-justify-start c-dhzjXW-jroWjL-align-center c-jWBVEc-icCKeKr-css"><a title="Go back" aria-label="Home" href="/" class="c-jpcrOZ" style="opacity:0;transform:none"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="24px" width="24px" xmlns="http://www.w3.org/2000/svg"><path d="M401.4 224h-214l83-79.4c11.9-12.5 11.9-32.7 0-45.2s-31.2-12.5-43.2 0L89 233.4c-6 5.8-9 13.7-9 22.4v.4c0 8.7 3 16.6 9 22.4l138.1 134c12 12.5 31.3 12.5 43.2 0 11.9-12.5 11.9-32.7 0-45.2l-83-79.4h214c16.9 0 30.6-14.3 30.6-32 .1-18-13.6-32-30.5-32z"></path></svg></a><p class="c-oGpVM c-oGpVM-fZEawd-type-h6 c-oGpVM-aaKbT-noMargin-true">NPM package deployment using YAML GitHub Actions</p></div></div></div><div class="c-gaCxRJ c-gaCxRJ-hakyQ-border-top" style="opacity:1"><div class="c-eedoXB"></div></div><div class="c-kOfWMu"><div class="c-lkBNdM" style="opacity:0;transform:translateX(0px) translateY(-16px) translateZ(0)"><div class="c-dpPLDk"><div class="c-bqyktt"><div><h1 id="npm-package-deployment-using-yaml-github-actions" class="c-oGpVM c-oGpVM-blWndS-type-h4">NPM package deployment using YAML GitHub Actions</h1>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">Recently <a href="http://github.com" class="c-lictOd">GitHub</a> announced that <a href="https://github.com/features/actions" class="c-lictOd">GitHub Actions</a> will be <a href="https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/" class="c-lictOd">moving away</a> from the original <a href="https://github.com/hashicorp/hcl" class="c-lictOd">HCL</a> syntax in-favour of a <a href="https://yaml.org/" class="c-lictOd">YAML</a> format
similar to <a href="https://travis-ci.org/" class="c-lictOd">Travis CI</a> and <a href="https://bitbucket.org/product/features/pipelines" class="c-lictOd">Bitbucket Pipelines</a>.  This means that <a href="https://github.com/hashicorp/hcl" class="c-lictOd">HCL</a> style actions will no longer work <a href="https://developer.github.com/actions/" class="c-lictOd">after September 30, 2019</a>.  It is possible to migrate using a <a href="https://help.github.com/en/articles/migrating-github-actions-from-hcl-syntax-to-yaml-syntax" class="c-lictOd">migration script</a> however in-some cases it may be required to reconfigure.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the <a href="https://yaml.org/" class="c-lictOd">YAML</a> format.  This means that using <a href="https://github.com/actions/bin/tree/master/filter/bin" class="c-lictOd">actions/bin/filter</a> to trigger a deploy would fail the build unless a release tag was found.  With this in mind, reconfiguring my <a href="https://github.com/features/actions" class="c-lictOd">GitHub Actions</a> seemed like the best choice.</p>
<!-- -->
<h2 id="desired-behaviour" class="c-oGpVM c-oGpVM-hYLUuc-type-h5">Desired Behaviour</h2>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">My particular use of <a href="https://github.com/features/actions" class="c-lictOd">GitHub Actions</a> is for deploying my small <a href="https://docs.npmjs.com/creating-node-js-modules" class="c-lictOd">NPM packages</a>.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">To keep it simple I wanted the following to occur:</p>
<ul>
<li class="c-oGpVM c-oGpVM-gPMmwr-type-body1"><span aria-hidden="true" class="c-jkHsGW">-</span>Install dependencies, Build and Test package on each commit</li>
<li class="c-oGpVM c-oGpVM-gPMmwr-type-body1"><span aria-hidden="true" class="c-jkHsGW">-</span>Publish package if a release tag was created</li>
</ul>
<!-- -->
<h2 id="creating-the-action-configuration" class="c-oGpVM c-oGpVM-hYLUuc-type-h5">Creating the Action Configuration</h2>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">Create the file <code>.github/workflows/workflow.yml</code></p>
<!-- -->
<h3 id="checking-for-tag" class="c-oGpVM c-oGpVM-fZEawd-type-h6">Checking for Tag</h3>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">This method simply builds and tests the package on any commit.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">Then if it finds a tag starting with <strong>v</strong>, it will trigger a deploy.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">So if a <a href="https://help.github.com/en/articles/creating-releases" class="c-lictOd">GitHub Release</a> is created with the tag <strong>v2.3.4</strong>, it will trigger a deploy.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">This is a bit naive however for my purposes I usually don&#x27;t tag unless its a release.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">One advantage of checking for a tag this way is that it cuts down on unneeded builds as a whole build can only ever run 1 or 2 times (2 in the case a build is deployed).</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">The <a href="https://github.com/features/actions" class="c-lictOd">GitHub Actions</a> docs mentions being able to <a href="https://help.github.com/en/articles/workflow-syntax-for-github-actions#example-restricting-the-workflow-run-to-specific-refs-and-paths" class="c-lictOd">restrict actions</a> to certain branches or tags however I could not get this to work.</p>
<pre><code class="c-PJLV hljs language-yaml">name: build # Name Action Build

on: [push]  # Trigger on push

jobs:
  run:
    runs-on: ubuntu-latest                         # Run on Ubuntu Docker image
    steps:
    - name: Checkout Repo                          # Checkout repo
      uses: actions/checkout@v1
    - name: Use Node.js                            # Configure Node.js
      uses: actions/setup-node@v1
      with:
        node-version: <span class="hljs-string">'12.9'</span>                       # Set Node.js Version
        registry-url: <span class="hljs-string">'https://registry.npmjs.org'</span> # Set Node.js reigistry
    - name: Deploy Info                            # Print GitHub Deploy info
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: echo <span class="hljs-string">"$GITHUB_CONTEXT"</span>
    - name: Install                                # Install dependancies
      run: npm install
    - name: Build                                  # Build app <span class="hljs-keyword">if</span> needed
      run: npm run build --<span class="hljs-keyword">if</span>-present
    - name: Test
      run: npm run test --<span class="hljs-keyword">if</span>-present               # Run tests <span class="hljs-keyword">if</span> needed
    - name: Publish
      <span class="hljs-keyword">if</span>: startsWith(github.ref, <span class="hljs-string">'refs/tags/v'</span>)    # Check <span class="hljs-keyword">if</span> publish step should run
      run: npm publish --access public             # Publish package
      env:
        NODE_AUTH_TOKEN: ${{ secrets.NPM_AUTH_TOKEN }} # Set NPM auth token from GitHub Secrets
</code></pre>
<!-- -->
<h3 id="checking-for-a-release" class="c-oGpVM c-oGpVM-fZEawd-type-h6">Checking for a Release</h3>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">If you found the previous method too naive, you may want to check for a <a href="https://help.github.com/en/articles/creating-releases" class="c-lictOd">GitHub Release</a> before triggering a deploy.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">The drawback to this is that a few extraneous builds will be triggered as the <code>release</code> event will fire both when the release is <code>created</code> and <code>published</code>.  As far as I am aware this can not be restricted using the <code>on</code> property.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">To ensure we only deploy once, we will indicate to only run the <strong>Publish</strong> step when a release is <code>published</code>.</p>
<pre><code class="c-PJLV hljs language-yaml">name: build

on:
  push:     # Run build on <span class="hljs-title function_">push</span> <span class="hljs-params">(commit in most cases)</span>
    tag: [] # Only run build <span class="hljs-keyword">if</span> not tagged
  release:  # Run build on release
    tag:
    - v*    # Check <span class="hljs-keyword">for</span> release tag

jobs:
  run:
    runs-on: ubuntu-latest                         # Run on Ubuntu Docker image
    steps:
    - name: Checkout Repo                          # Checkout repo
      uses: actions/checkout@v1
    - name: Use Node.js                            # Configure Node.js
      uses: actions/setup-node@v1
      with:
        node-version: '12.9'                       # Set Node.js Version
        registry-url: 'https:<span class="hljs-comment">//registry.npmjs.org' # Set Node.js reigistry</span>
    - name: Deploy Info                            # Print GitHub Deploy info
      env:
        GITHUB_CONTEXT: ${{ toJson(github) }}
      run: echo <span class="hljs-string">"$GITHUB_CONTEXT"</span>
    - name: Install                                # Install dependancies
      run: npm install
    - name: Build                                  # Build app <span class="hljs-keyword">if</span> needed
      run: npm run build --<span class="hljs-keyword">if</span>-present
    - name: Test
      run: npm run test --<span class="hljs-keyword">if</span>-present               # Run tests <span class="hljs-keyword">if</span> needed
    - name: Publish
      <span class="hljs-keyword">if</span>: github.event_name == <span class="hljs-string">'release'</span> &#x26;&#x26; github.event.action == <span class="hljs-string">'published'</span> # Check <span class="hljs-keyword">if</span> publish step should run
      run: npm publish --access public             # Publish package
      env:
        NODE_AUTH_TOKEN: ${{ secrets.NPM_AUTH_TOKEN }} # Set NPM auth token from GitHub Secrets
</code></pre>
<!-- -->
<h2 id="setting-npm-auth-token-secret" class="c-oGpVM c-oGpVM-hYLUuc-type-h5">Setting NPM Auth Token Secret</h2>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">Simply go to your repo <strong>Settings</strong> and select the <strong>Secrets</strong> tab.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">Then <strong>Add a new secret</strong> with the <strong>Name</strong> of <code>NPM_AUTH_TOKEN</code> and set the <strong>Value</strong> to your <a href="https://docs.npmjs.com/creating-and-viewing-authentication-tokens" class="c-lictOd">NPM token</a>.</p>
<!-- -->
<h2 id="adding-the-github-actions-badge" class="c-oGpVM c-oGpVM-hYLUuc-type-h5">Adding the GitHub Actions badge</h2>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1"><a href="http://github.com" class="c-lictOd">GitHub</a> now offers an undocumented API which will return nice <a href="https://travis-ci.org/" class="c-lictOd">Travis CI</a> like status badge.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">An example can be seen on the <a href="https://github.com/actions/toolkit" class="c-lictOd">actions/toolkit</a> repo.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">The format for the API is as follows:</p>
<pre><code class="c-PJLV hljs language-markdown">https:<span class="hljs-comment">//github.com/&#x3C;user|org>/&#x3C;repo>/&#x3C;action_name>/badge.svg</span>
</code></pre>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">The <code>action_name</code> propery is the <code>name</code> field in the <a href="https://yaml.org/" class="c-lictOd">YAML</a> which in this case is <code>build</code>.</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">An example of this would be:</p>
<pre><code class="c-PJLV hljs language-markdown">https:<span class="hljs-comment">//github.com/woofers/ludum-dare-badges/workflows/build/badge.svg</span>
</code></pre>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">To make it even nicer we can link the badge to our repo&#x27;s actions page:</p>
<pre><code class="c-PJLV hljs language-markdown">[![img](https:<span class="hljs-comment">//github.com/woofers/ludum-dare-badges/workflows/build/badge.svg)](https://github.com/woofers/ludum-dare-badges/actions)</span>
</code></pre>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1">It will look something like this:</p>
<p class="c-oGpVM c-oGpVM-gPMmwr-type-body1"><a href="https://github.com/woofers/ludum-dare-badges/actions" class="c-lictOd"><img src="https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg" alt="img"/></a></p></div></div></div></div></div><div class="c-joZAf"><div class="c-deYohn c-deYohn-ctiHJA-position-bottom"><div></div><div class="c-SFHOw"><a target="_blank" rel="noopener noreferrer" href="https://github.com/woofers" class="c-cIdiJW"><div class="c-eYSuNY"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><p class="c-oGpVM c-oGpVM-kMxtTI-type-button c-oGpVM-aaKbT-noMargin-true c-oGpVM-idbzzBd-css">GitHub</p></div></a><a href="/resume/jaxsonvd-resume.pdf" class="c-cIdiJW"><div class="c-eYSuNY"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path></svg><p class="c-oGpVM c-oGpVM-kMxtTI-type-button c-oGpVM-aaKbT-noMargin-true c-oGpVM-idbzzBd-css">Resume</p></div></a><a href="mailto:hey@jaxs.onl" class="c-cIdiJW"><div class="c-eYSuNY"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.2em" width="1.2em" xmlns="http://www.w3.org/2000/svg"><path d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 2v.511l-8 6.223-8-6.222V6h16zM4 18V9.044l7.386 5.745a.994.994 0 0 0 1.228 0L20 9.044 20.002 18H4z"></path></svg><p class="c-oGpVM c-oGpVM-kMxtTI-type-button c-oGpVM-aaKbT-noMargin-true c-oGpVM-idbzzBd-css">hey@jaxs.onl</p></div></a></div></div></div></div></main></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"meta":{"layout":"post","title":"NPM package deployment using YAML GitHub Actions","date":"Wed, 21 Aug 2019 00:00:00 GMT"},"content":"---\nlayout: post\ntitle: NPM package deployment using YAML GitHub Actions\ndate: 2019-08-21\n---\n\n# NPM package deployment using YAML GitHub Actions\n\nRecently [GitHub](http://github.com) announced that [GitHub Actions](https://github.com/features/actions) will be [moving away](https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/) from the original [HCL](https://github.com/hashicorp/hcl) syntax in-favour of a [YAML](https://yaml.org/) format\nsimilar to [Travis CI](https://travis-ci.org/) and [Bitbucket Pipelines](https://bitbucket.org/product/features/pipelines).  This means that [HCL](https://github.com/hashicorp/hcl) style actions will no longer work [after September 30, 2019](https://developer.github.com/actions/).  It is possible to migrate using a [migration script](https://help.github.com/en/articles/migrating-github-actions-from-hcl-syntax-to-yaml-syntax) however in-some cases it may be required to reconfigure.\n\nThis particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the [YAML](https://yaml.org/) format.  This means that using [actions/bin/filter](https://github.com/actions/bin/tree/master/filter/bin) to trigger a deploy would fail the build unless a release tag was found.  With this in mind, reconfiguring my [GitHub Actions](https://github.com/features/actions) seemed like the best choice.\n\n\n\u003ca id=\"orgb58448b\"\u003e\u003c/a\u003e\n\n## Desired Behaviour\n\nMy particular use of [GitHub Actions](https://github.com/features/actions) is for deploying my small [NPM packages](https://docs.npmjs.com/creating-node-js-modules).\n\nTo keep it simple I wanted the following to occur:\n\n-   Install dependencies, Build and Test package on each commit\n-   Publish package if a release tag was created\n\n\n\u003ca id=\"org521573d\"\u003e\u003c/a\u003e\n\n## Creating the Action Configuration\n\nCreate the file `.github/workflows/workflow.yml`\n\n\n\u003ca id=\"org9bc8afb\"\u003e\u003c/a\u003e\n\n### Checking for Tag\n\nThis method simply builds and tests the package on any commit.\n\nThen if it finds a tag starting with **v**, it will trigger a deploy.\n\nSo if a [GitHub Release](https://help.github.com/en/articles/creating-releases) is created with the tag **v2.3.4**, it will trigger a deploy.\n\nThis is a bit naive however for my purposes I usually don't tag unless its a release.\n\nOne advantage of checking for a tag this way is that it cuts down on unneeded builds as a whole build can only ever run 1 or 2 times (2 in the case a build is deployed).\n\nThe [GitHub Actions](https://github.com/features/actions) docs mentions being able to [restrict actions](https://help.github.com/en/articles/workflow-syntax-for-github-actions#example-restricting-the-workflow-run-to-specific-refs-and-paths) to certain branches or tags however I could not get this to work.\n\n```yaml\nname: build # Name Action Build\n\non: [push]  # Trigger on push\n\njobs:\n  run:\n    runs-on: ubuntu-latest                         # Run on Ubuntu Docker image\n    steps:\n    - name: Checkout Repo                          # Checkout repo\n      uses: actions/checkout@v1\n    - name: Use Node.js                            # Configure Node.js\n      uses: actions/setup-node@v1\n      with:\n        node-version: '12.9'                       # Set Node.js Version\n        registry-url: 'https://registry.npmjs.org' # Set Node.js reigistry\n    - name: Deploy Info                            # Print GitHub Deploy info\n      env:\n        GITHUB_CONTEXT: ${{ toJson(github) }}\n      run: echo \"$GITHUB_CONTEXT\"\n    - name: Install                                # Install dependancies\n      run: npm install\n    - name: Build                                  # Build app if needed\n      run: npm run build --if-present\n    - name: Test\n      run: npm run test --if-present               # Run tests if needed\n    - name: Publish\n      if: startsWith(github.ref, 'refs/tags/v')    # Check if publish step should run\n      run: npm publish --access public             # Publish package\n      env:\n        NODE_AUTH_TOKEN: ${{ secrets.NPM_AUTH_TOKEN }} # Set NPM auth token from GitHub Secrets\n```\n\n\n\u003ca id=\"org2d248b4\"\u003e\u003c/a\u003e\n\n### Checking for a Release\n\nIf you found the previous method too naive, you may want to check for a [GitHub Release](https://help.github.com/en/articles/creating-releases) before triggering a deploy.\n\nThe drawback to this is that a few extraneous builds will be triggered as the `release` event will fire both when the release is `created` and `published`.  As far as I am aware this can not be restricted using the `on` property.\n\nTo ensure we only deploy once, we will indicate to only run the **Publish** step when a release is `published`.\n\n```yaml\nname: build\n\non:\n  push:     # Run build on push (commit in most cases)\n    tag: [] # Only run build if not tagged\n  release:  # Run build on release\n    tag:\n    - v*    # Check for release tag\n\njobs:\n  run:\n    runs-on: ubuntu-latest                         # Run on Ubuntu Docker image\n    steps:\n    - name: Checkout Repo                          # Checkout repo\n      uses: actions/checkout@v1\n    - name: Use Node.js                            # Configure Node.js\n      uses: actions/setup-node@v1\n      with:\n        node-version: '12.9'                       # Set Node.js Version\n        registry-url: 'https://registry.npmjs.org' # Set Node.js reigistry\n    - name: Deploy Info                            # Print GitHub Deploy info\n      env:\n        GITHUB_CONTEXT: ${{ toJson(github) }}\n      run: echo \"$GITHUB_CONTEXT\"\n    - name: Install                                # Install dependancies\n      run: npm install\n    - name: Build                                  # Build app if needed\n      run: npm run build --if-present\n    - name: Test\n      run: npm run test --if-present               # Run tests if needed\n    - name: Publish\n      if: github.event_name == 'release' \u0026\u0026 github.event.action == 'published' # Check if publish step should run\n      run: npm publish --access public             # Publish package\n      env:\n        NODE_AUTH_TOKEN: ${{ secrets.NPM_AUTH_TOKEN }} # Set NPM auth token from GitHub Secrets\n```\n\n\n\u003ca id=\"org515fedd\"\u003e\u003c/a\u003e\n\n## Setting NPM Auth Token Secret\n\nSimply go to your repo **Settings** and select the **Secrets** tab.\n\nThen **Add a new secret** with the **Name** of `NPM_AUTH_TOKEN` and set the **Value** to your [NPM token](https://docs.npmjs.com/creating-and-viewing-authentication-tokens).\n\n\n\u003ca id=\"org5d470fc\"\u003e\u003c/a\u003e\n\n## Adding the GitHub Actions badge\n\n[GitHub](http://github.com) now offers an undocumented API which will return nice [Travis CI](https://travis-ci.org/) like status badge.\n\nAn example can be seen on the [actions/toolkit](https://github.com/actions/toolkit) repo.\n\nThe format for the API is as follows:\n\n```markdown\nhttps://github.com/\u003cuser|org\u003e/\u003crepo\u003e/\u003caction_name\u003e/badge.svg\n```\n\nThe `action_name` propery is the `name` field in the [YAML](https://yaml.org/) which in this case is `build`.\n\nAn example of this would be:\n\n```markdown\nhttps://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg\n```\n\nTo make it even nicer we can link the badge to our repo's actions page:\n\n```markdown\n[![img](https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg)](https://github.com/woofers/ludum-dare-badges/actions)\n```\n\nIt will look something like this:\n\n[![img](https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg)](https://github.com/woofers/ludum-dare-badges/actions)\n","post":"yaml-github-actions"},"title":"NPM package deployment using YAML GitHub Actions"},"__N_SSG":true},"page":"/blog/[post]","query":{"post":"yaml-github-actions"},"buildId":"wmKsTZ9bCt_jMfM_KJ7C_","isFallback":false,"dynamicIds":[5568],"gsp":true,"scriptLoader":[]}</script></body></html>