1:"$Sreact.fragment"
2:I[6250,["250","static/chunks/250-fbada636f76bfed5.js","344","static/chunks/344-78336a423e486e08.js","824","static/chunks/824-bfa9a65059c46dde.js","489","static/chunks/app/(index)/blog/%5B...slug%5D/page-cc1ca22fe7ab609d.js"],"ViewTransitions"]
3:I[6090,[],""]
4:I[1720,[],""]
5:I[6250,["250","static/chunks/250-fbada636f76bfed5.js","344","static/chunks/344-78336a423e486e08.js","824","static/chunks/824-bfa9a65059c46dde.js","489","static/chunks/app/(index)/blog/%5B...slug%5D/page-cc1ca22fe7ab609d.js"],"Link"]
7:I[1346,[],"OutletBoundary"]
a:I[6722,[],"AsyncMetadataOutlet"]
c:I[1346,[],"ViewportBoundary"]
e:I[1346,[],"MetadataBoundary"]
10:I[2733,[],""]
:HL["/_next/static/media/0703289cbb03d1b5-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/2f66d2cded5eb62b-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/4195ccbd93429073-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/4b25ba58b96bf829-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/5191fc87febab105-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/6f4b1b8a3bb362a3-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/a155a31b509d9798-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/b1373ee6909ce2f4-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/b817805ccb9a2b4a-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/be78684d432e3822-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/c8897484f20cb9bc-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/dd2c1f56eea99b69-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/e6581a79ce8b3a05-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/media/ee0a4d0f22f144a3-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/625019cab40d51c5.css","style"]
0:{"P":null,"b":"JfCd75Zx1Y2KHBAuHN_gA","p":"","c":["","blog","yaml-github-actions",""],"i":false,"f":[[["",{"children":["(index)",{"children":["blog",{"children":[["slug","yaml-github-actions","c"],{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/625019cab40d51c5.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$L2",null,{"children":["$","html",null,{"lang":"en","className":"light __variable_cc5bd2 __variable_9f010c","children":[["$","head",null,{}],["$","body",null,{"children":["$","div",null,{"id":"__next","children":["$","div",null,{"className":"flex min-h-screen flex-col text-zinc-900 bg-zinc-100 dark-mode:text-neutral-800","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}]}]]}],{"children":["(index)",["$","$1","c",{"children":[null,["$","main",null,{"className":"min-w-0 box-border m-0 flex grow","style":"$undefined","children":["$","div",null,{"className":"min-w-0 box-border m-0 flex flex-col grow gap-y-0 max-h-screen overflow-y-auto fade-morph","style":"$undefined","children":[["$","div",null,{"className":"min-w-0 box-border m-0 grow flex flex-col mx-auto w-full max-w-container [max-width:960px] px-4 sm:px-6 lg:px-8 py-2 sm:py-3 lg:py-4","style":"$undefined","children":[["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:style","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:1:props:style","children":404}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:style","children":["$","h2",null,{"style":"$0:f:0:1:1:props:children:1:props:children:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style","children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}],["$","hr",null,{"className":"my-4 border-gray-200 dark-mode:border-zinc-300 mt-8 mb-2"}]]}],["$","$L5",null,{"href":"/","className":"min-w-0 box-border m-0 flex justify-center flex-row gap-x-0 pb-8","style":"$undefined","children":["$","span",null,{"className":"min-w-0 box-border m-0 flex flex-col-reverse gap-y-0 text-[#c7c7c6] dark-mode:text-[#2e2e2e]","style":"$undefined","children":[["$","span",null,{"className":"min-w-0 box-border m-0 [font-family:var(--font-serif)] text-5xl font-bold [font-size:2.4rem]","style":"$undefined","children":"Jaxson"}],["$","span",null,{"className":"min-w-0 box-border m-0 [font-family:var(--font-serif)] text-5xl italic font-light [margin-bottom:-8px] [margin-left:28px] [font-size:1.2rem]","style":"$undefined","children":"Van Doorn"}]]}]}]]}]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","yaml-github-actions","c"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6",null,["$","$L7",null,{"children":["$L8","$L9",["$","$La",null,{"promise":"$@b"}]]}]]}],{},null,false]},null,false]},null,false]},null,false]},null,false],["$","$1","h",{"children":[null,["$","$1","ZtIkgku3N_BMuMr3IDcOdv",{"children":[["$","$Lc",null,{"children":"$Ld"}],["$","meta",null,{"name":"next-size-adjust","content":""}]]}],["$","$Le",null,{"children":"$Lf"}]]}],false]],"m":"$undefined","G":["$10","$undefined"],"s":false,"S":true}
11:"$Sreact.suspense"
12:I[6722,[],"AsyncMetadata"]
f:["$","div",null,{"hidden":true,"children":["$","$11",null,{"fallback":null,"children":["$","$L12",null,{"promise":"$@13"}]}]}]
9:null
14:I[2824,["250","static/chunks/250-fbada636f76bfed5.js","344","static/chunks/344-78336a423e486e08.js","824","static/chunks/824-bfa9a65059c46dde.js","489","static/chunks/app/(index)/blog/%5B...slug%5D/page-cc1ca22fe7ab609d.js"],"Mdx"]
15:T82cd,var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),m=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},a=(n,e,s,A)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of p(e))!C.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(A=d(e,r))||A.enumerable});return n};var g=(n,e,s)=>(s=n!=null?h(y(n)):{},a(e||!n||!n.__esModule?c(s,"default",{value:n,enumerable:!0}):s,n)),f=n=>a(c({},"__esModule",{value:!0}),n);var o=u((v,i)=>{i.exports=_jsx_runtime});var w={};m(w,{default:()=>D,frontmatter:()=>b});var l=g(o()),b={layout:"post",title:"NPM package deployment using YAML GitHub Actions",date:new Date(15663456e5),description:"Recently GitHub announced that GitHub Actions will be moving away from the original HCL syntax in-favour of a YAML format similar to Travis CI and Bitbucket Pipelines. This means that HCL style actions will no longer work after September 30, 2019. It is possible to migrate using a migration script however in-some cases it may be required to reconfigure. This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the YAML format."};function t(n){let e=Object.assign({p:"p",a:"a",h2:"h2",span:"span",ul:"ul",li:"li",code:"code",h3:"h3",strong:"strong",div:"div",pre:"pre"},n.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:["Recently ",(0,l.jsx)(e.a,{href:"http://github.com",children:"GitHub"})," announced that ",(0,l.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," will be ",(0,l.jsx)(e.a,{href:"https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/",children:"moving away"})," from the original ",(0,l.jsx)(e.a,{href:"https://github.com/hashicorp/hcl",children:"HCL"})," syntax in-favour of a ",(0,l.jsx)(e.a,{href:"https://yaml.org/",children:"YAML"}),` format
similar to `,(0,l.jsx)(e.a,{href:"https://travis-ci.org/",children:"Travis CI"})," and ",(0,l.jsx)(e.a,{href:"https://bitbucket.org/product/features/pipelines",children:"Bitbucket Pipelines"}),".  This means that ",(0,l.jsx)(e.a,{href:"https://github.com/hashicorp/hcl",children:"HCL"})," style actions will no longer work ",(0,l.jsx)(e.a,{href:"https://developer.github.com/actions/",children:"after September 30, 2019"}),".  It is possible to migrate using a ",(0,l.jsx)(e.a,{href:"https://help.github.com/en/articles/migrating-github-actions-from-hcl-syntax-to-yaml-syntax",children:"migration script"})," however in-some cases it may be required to reconfigure."]}),`
`,(0,l.jsxs)(e.p,{children:["This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the ",(0,l.jsx)(e.a,{href:"https://yaml.org/",children:"YAML"})," format.  This means that using ",(0,l.jsx)(e.a,{href:"https://github.com/actions/bin/tree/master/filter/bin",children:"actions/bin/filter"})," to trigger a deploy would fail the build unless a release tag was found.  With this in mind, reconfiguring my ",(0,l.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," seemed like the best choice."]}),`
`,(0,l.jsx)("a",{id:"orgb58448b"}),`
`,(0,l.jsxs)(e.h2,{id:"desired-behaviour",children:[(0,l.jsx)(e.a,{className:"anchor",href:"#desired-behaviour",children:(0,l.jsx)(e.span,{className:"icon icon-link"})}),"Desired Behaviour"]}),`
`,(0,l.jsxs)(e.p,{children:["My particular use of ",(0,l.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," is for deploying my small ",(0,l.jsx)(e.a,{href:"https://docs.npmjs.com/creating-node-js-modules",children:"NPM packages"}),"."]}),`
`,(0,l.jsx)(e.p,{children:"To keep it simple I wanted the following to occur:"}),`
`,(0,l.jsxs)(e.ul,{children:[`
`,(0,l.jsx)(e.li,{children:"Install dependencies, Build and Test package on each commit"}),`
`,(0,l.jsx)(e.li,{children:"Publish package if a release tag was created"}),`
`]}),`
`,(0,l.jsx)("a",{id:"org521573d"}),`
`,(0,l.jsxs)(e.h2,{id:"creating-the-action-configuration",children:[(0,l.jsx)(e.a,{className:"anchor",href:"#creating-the-action-configuration",children:(0,l.jsx)(e.span,{className:"icon icon-link"})}),"Creating the Action Configuration"]}),`
`,(0,l.jsxs)(e.p,{children:["Create the file ",(0,l.jsx)(e.code,{children:".github/workflows/workflow.yml"})]}),`
`,(0,l.jsx)("a",{id:"org9bc8afb"}),`
`,(0,l.jsxs)(e.h3,{id:"checking-for-tag",children:[(0,l.jsx)(e.a,{className:"anchor",href:"#checking-for-tag",children:(0,l.jsx)(e.span,{className:"icon icon-link"})}),"Checking for Tag"]}),`
`,(0,l.jsx)(e.p,{children:"This method simply builds and tests the package on any commit."}),`
`,(0,l.jsxs)(e.p,{children:["Then if it finds a tag starting with ",(0,l.jsx)(e.strong,{children:"v"}),", it will trigger a deploy."]}),`
`,(0,l.jsxs)(e.p,{children:["So if a ",(0,l.jsx)(e.a,{href:"https://help.github.com/en/articles/creating-releases",children:"GitHub Release"})," is created with the tag ",(0,l.jsx)(e.strong,{children:"v2.3.4"}),", it will trigger a deploy."]}),`
`,(0,l.jsx)(e.p,{children:"This is a bit naive however for my purposes I usually don't tag unless its a release."}),`
`,(0,l.jsx)(e.p,{children:"One advantage of checking for a tag this way is that it cuts down on unneeded builds as a whole build can only ever run 1 or 2 times (2 in the case a build is deployed)."}),`
`,(0,l.jsxs)(e.p,{children:["The ",(0,l.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," docs mentions being able to ",(0,l.jsx)(e.a,{href:"https://help.github.com/en/articles/workflow-syntax-for-github-actions#example-restricting-the-workflow-run-to-specific-refs-and-paths",children:"restrict actions"})," to certain branches or tags however I could not get this to work."]}),`
`,(0,l.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,l.jsx)(e.pre,{"data-language":"yaml","data-theme":"default",children:(0,l.jsxs)(e.code,{"data-language":"yaml","data-theme":"default",children:[(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"build"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:" "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Name Action Build"})]}),`
`,(0,l.jsx)(e.span,{className:"line",children:" "}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"on"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": ["}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"push"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"]  "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Trigger on push"})]}),`
`,(0,l.jsx)(e.span,{className:"line",children:" "}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"jobs"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"  "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"runs-on"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"ubuntu-latest"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                         "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Run on Ubuntu Docker image"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"steps"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Checkout Repo"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                          "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Checkout repo"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"uses"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"actions/checkout@v1"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Use Node.js"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                            "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Configure Node.js"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"uses"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"actions/setup-node@v1"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"with"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"node-version"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"'12.9'"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                       "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Set Node.js Version"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"registry-url"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"'https://registry.npmjs.org'"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:" "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Set Node.js reigistry"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Deploy Info"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                            "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Print GitHub Deploy info"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"env"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"GITHUB_CONTEXT"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"${{ toJson(github) }}"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:'echo "$GITHUB_CONTEXT"'})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Install"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                                "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Install dependancies"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm install"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Build"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                                  "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Build app if needed"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm run build --if-present"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Test"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm run test --if-present"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"               "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Run tests if needed"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Publish"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"if"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"startsWith(github.ref, 'refs/tags/v')"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Check if publish step should run"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm publish --access public"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"             "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Publish package"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"env"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"NODE_AUTH_TOKEN"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"${{ secrets.NPM_AUTH_TOKEN }}"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:" "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Set NPM auth token from GitHub Secrets"})]})]})})}),`
`,(0,l.jsx)("a",{id:"org2d248b4"}),`
`,(0,l.jsxs)(e.h3,{id:"checking-for-a-release",children:[(0,l.jsx)(e.a,{className:"anchor",href:"#checking-for-a-release",children:(0,l.jsx)(e.span,{className:"icon icon-link"})}),"Checking for a Release"]}),`
`,(0,l.jsxs)(e.p,{children:["If you found the previous method too naive, you may want to check for a ",(0,l.jsx)(e.a,{href:"https://help.github.com/en/articles/creating-releases",children:"GitHub Release"})," before triggering a deploy."]}),`
`,(0,l.jsxs)(e.p,{children:["The drawback to this is that a few extraneous builds will be triggered as the ",(0,l.jsx)(e.code,{children:"release"})," event will fire both when the release is ",(0,l.jsx)(e.code,{children:"created"})," and ",(0,l.jsx)(e.code,{children:"published"}),".  As far as I am aware this can not be restricted using the ",(0,l.jsx)(e.code,{children:"on"})," property."]}),`
`,(0,l.jsxs)(e.p,{children:["To ensure we only deploy once, we will indicate to only run the ",(0,l.jsx)(e.strong,{children:"Publish"})," step when a release is ",(0,l.jsx)(e.code,{children:"published"}),"."]}),`
`,(0,l.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,l.jsx)(e.pre,{"data-language":"yaml","data-theme":"default",children:(0,l.jsxs)(e.code,{"data-language":"yaml","data-theme":"default",children:[(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"build"})]}),`
`,(0,l.jsx)(e.span,{className:"line",children:" "}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"on"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"  "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"push"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":     "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Run build on push (commit in most cases)"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"tag"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": [] "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Only run build if not tagged"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"  "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"release"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":  "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Run build on release"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"tag"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"v*"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Check for release tag"})]}),`
`,(0,l.jsx)(e.span,{className:"line",children:" "}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"jobs"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"  "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"runs-on"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"ubuntu-latest"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                         "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Run on Ubuntu Docker image"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"steps"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Checkout Repo"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                          "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Checkout repo"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"uses"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"actions/checkout@v1"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Use Node.js"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                            "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Configure Node.js"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"uses"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"actions/setup-node@v1"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"with"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"node-version"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"'12.9'"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                       "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Set Node.js Version"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"registry-url"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"'https://registry.npmjs.org'"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:" "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Set Node.js reigistry"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Deploy Info"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                            "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Print GitHub Deploy info"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"env"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"GITHUB_CONTEXT"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"${{ toJson(github) }}"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:'echo "$GITHUB_CONTEXT"'})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Install"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                                "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Install dependancies"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm install"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Build"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"                                  "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Build app if needed"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm run build --if-present"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Test"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm run test --if-present"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"               "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Run tests if needed"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"    - "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"name"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"Publish"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"if"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"github.event_name == 'release' && github.event.action == 'published'"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:" "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Check if publish step should run"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"run"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"npm publish --access public"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"             "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Publish package"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"      "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"env"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:":"})]}),`
`,(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"        "}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"NODE_AUTH_TOKEN"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:": "}),(0,l.jsx)(e.span,{style:{color:"#DD672C"},children:"${{ secrets.NPM_AUTH_TOKEN }}"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:" "}),(0,l.jsx)(e.span,{style:{color:"#787890",fontStyle:"italic"},children:"# Set NPM auth token from GitHub Secrets"})]})]})})}),`
`,(0,l.jsx)("a",{id:"org515fedd"}),`
`,(0,l.jsxs)(e.h2,{id:"setting-npm-auth-token-secret",children:[(0,l.jsx)(e.a,{className:"anchor",href:"#setting-npm-auth-token-secret",children:(0,l.jsx)(e.span,{className:"icon icon-link"})}),"Setting NPM Auth Token Secret"]}),`
`,(0,l.jsxs)(e.p,{children:["Simply go to your repo ",(0,l.jsx)(e.strong,{children:"Settings"})," and select the ",(0,l.jsx)(e.strong,{children:"Secrets"})," tab."]}),`
`,(0,l.jsxs)(e.p,{children:["Then ",(0,l.jsx)(e.strong,{children:"Add a new secret"})," with the ",(0,l.jsx)(e.strong,{children:"Name"})," of ",(0,l.jsx)(e.code,{children:"NPM_AUTH_TOKEN"})," and set the ",(0,l.jsx)(e.strong,{children:"Value"})," to your ",(0,l.jsx)(e.a,{href:"https://docs.npmjs.com/creating-and-viewing-authentication-tokens",children:"NPM token"}),"."]}),`
`,(0,l.jsx)("a",{id:"org5d470fc"}),`
`,(0,l.jsxs)(e.h2,{id:"adding-the-github-actions-badge",children:[(0,l.jsx)(e.a,{className:"anchor",href:"#adding-the-github-actions-badge",children:(0,l.jsx)(e.span,{className:"icon icon-link"})}),"Adding the GitHub Actions badge"]}),`
`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:"http://github.com",children:"GitHub"})," now offers an undocumented API which will return nice ",(0,l.jsx)(e.a,{href:"https://travis-ci.org/",children:"Travis CI"})," like status badge."]}),`
`,(0,l.jsxs)(e.p,{children:["An example can be seen on the ",(0,l.jsx)(e.a,{href:"https://github.com/actions/toolkit",children:"actions/toolkit"})," repo."]}),`
`,(0,l.jsx)(e.p,{children:"The format for the API is as follows:"}),`
`,(0,l.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,l.jsx)(e.pre,{"data-language":"markdown","data-theme":"default",children:(0,l.jsx)(e.code,{"data-language":"markdown","data-theme":"default",children:(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"https://github.com/<user|org>/<repo>/<action_name>/badge.svg"})})})})}),`
`,(0,l.jsxs)(e.p,{children:["The ",(0,l.jsx)(e.code,{children:"action_name"})," propery is the ",(0,l.jsx)(e.code,{children:"name"})," field in the ",(0,l.jsx)(e.a,{href:"https://yaml.org/",children:"YAML"})," which in this case is ",(0,l.jsx)(e.code,{children:"build"}),"."]}),`
`,(0,l.jsx)(e.p,{children:"An example of this would be:"}),`
`,(0,l.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,l.jsx)(e.pre,{"data-language":"markdown","data-theme":"default",children:(0,l.jsx)(e.code,{"data-language":"markdown","data-theme":"default",children:(0,l.jsx)(e.span,{className:"line",children:(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg"})})})})}),`
`,(0,l.jsx)(e.p,{children:"To make it even nicer we can link the badge to our repo's actions page:"}),`
`,(0,l.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,l.jsx)(e.pre,{"data-language":"markdown","data-theme":"default",children:(0,l.jsx)(e.code,{"data-language":"markdown","data-theme":"default",children:(0,l.jsxs)(e.span,{className:"line",children:[(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"["}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"![img]("}),(0,l.jsx)(e.span,{style:{color:"#FE8C52",textDecoration:"underline"},children:"https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:")"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:"]("}),(0,l.jsx)(e.span,{style:{color:"#FE8C52",textDecoration:"underline"},children:"https://github.com/woofers/ludum-dare-badges/actions"}),(0,l.jsx)(e.span,{style:{color:"#AAAACA"},children:")"})]})})})}),`
`,(0,l.jsx)(e.p,{children:"It will look something like this:"})]})}function N(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,Object.assign({},n,{children:(0,l.jsx)(t,n)})):t(n)}var D=N;return f(w);})();
;return Component;6:["$","article",null,{"className":"flex-grow pt-6 prose dark:prose-invert relative","children":[["$","div",null,{"className":"min-w-0 box-border m-0 absolute left-[-14px] top-[-14px] flex justify-end sm:top-[-22px] xl:hidden","style":"$undefined","children":["$","$L5",null,{"href":"/","className":"px-4 py-4 block","aria-label":"Back","children":["$","span",null,{"className":"min-w-0 box-border m-0 flex items-center flex-row gap-x-2 text-zinc-500 dark-mode:text-neutral-500","style":"$undefined","children":[["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 20 20","aria-hidden":"true","children":["$undefined",[["$","path","0",{"fillRule":"evenodd","d":"M7.793 2.232a.75.75 0 01-.025 1.06L3.622 7.25h10.003a5.375 5.375 0 010 10.75H10.75a.75.75 0 010-1.5h2.875a3.875 3.875 0 000-7.75H3.622l4.146 3.957a.75.75 0 01-1.036 1.085l-5.5-5.25a.75.75 0 010-1.085l5.5-5.25a.75.75 0 011.06.025z","clipRule":"evenodd","children":"$undefined"}]]],"className":"$undefined","style":{"color":"$undefined"},"height":"1em","width":"1em","xmlns":"http://www.w3.org/2000/svg"}],["$","span",null,{"className":"min-w-0 box-border m-0 text-sm [line-height:1.375rem] sm:text-base sm:[line-height:1.75rem]","style":"$undefined","children":"back"}]]}]}]}],["$","div",null,{"className":"min-w-0 box-border m-0 sticky hidden top-0 left-0 h-0 xl:block","style":"$undefined","children":["$","div",null,{"className":"min-w-0 box-border m-0 absolute top-[16px] left-[-160px]","style":"$undefined","children":["$","$L5",null,{"href":"/","className":"px-4 py-4 block","aria-label":"Back","children":["$","span",null,{"className":"min-w-0 box-border m-0 flex items-center flex-row gap-x-2 text-zinc-500 dark-mode:text-neutral-500","style":"$undefined","children":[["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 20 20","aria-hidden":"true","children":["$undefined",[["$","path","0",{"fillRule":"evenodd","d":"M7.793 2.232a.75.75 0 01-.025 1.06L3.622 7.25h10.003a5.375 5.375 0 010 10.75H10.75a.75.75 0 010-1.5h2.875a3.875 3.875 0 000-7.75H3.622l4.146 3.957a.75.75 0 01-1.036 1.085l-5.5-5.25a.75.75 0 010-1.085l5.5-5.25a.75.75 0 011.06.025z","clipRule":"evenodd","children":"$undefined"}]]],"className":"$undefined","style":{"color":"$undefined"},"height":"1em","width":"1em","xmlns":"http://www.w3.org/2000/svg"}],["$","span",null,{"className":"min-w-0 box-border m-0 text-sm [line-height:1.375rem] sm:text-base sm:[line-height:1.75rem]","style":"$undefined","children":"back"}]]}]}]}]}],false,[["$","h1",null,{"className":"min-w-0 box-border m-0 [font-family:var(--font-serif)] text-3xl font-medium mt-2.5 sm:mt-0 text-morph","style":"$undefined","children":"NPM package deployment using YAML GitHub Actions"}],["$","p",null,{"className":"min-w-0 box-border m-0 text-lg sm:text-xl text-zinc-500 dark-mode:text-neutral-500","style":"$undefined","children":"Wednesday, August 21, 2019"}],["$","hr",null,{"className":"my-4 border-gray-200 dark-mode:border-zinc-300"}],["$","$L14",null,{"code":"$15"}]]]}]
d:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1, viewport-fit=cover"}],["$","meta","2",{"name":"theme-color","content":"#f4f4f5"}]]
8:null
b:{"metadata":[["$","title","0",{"children":"NPM package deployment using YAML GitHub Actions | Jaxson Van Doorn"}],["$","meta","1",{"name":"description","content":"All-around developer, half-designer and tinkerer."}],["$","link","2",{"rel":"manifest","href":"/manifest.webmanifest","crossOrigin":"$undefined"}],["$","meta","3",{"name":"creator","content":"Jaxson Van Doorn"}],["$","meta","4",{"name":"publisher","content":"Jaxson Van Doorn"}],["$","meta","5",{"property":"og:title","content":"Jaxson Van Doorn"}],["$","meta","6",{"property":"og:description","content":"All-around developer, half-designer and tinkerer."}],["$","meta","7",{"property":"og:image:type","content":"image/png"}],["$","meta","8",{"property":"og:image","content":"https://jaxs.onl/meta-image.png"}],["$","meta","9",{"property":"og:image:alt","content":"Cover image for jaxs.onl"}],["$","meta","10",{"property":"og:image:width","content":"1200"}],["$","meta","11",{"property":"og:image:height","content":"630"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:creator","content":"@jaxsonvandoorn"}],["$","meta","14",{"name":"twitter:title","content":"NPM package deployment using YAML GitHub Actions"}],["$","meta","15",{"name":"twitter:description","content":"All-around developer, half-designer and tinkerer."}],["$","meta","16",{"name":"twitter:image","content":"https://jaxs.onl/meta-image.png"}],["$","meta","17",{"name":"twitter:image:alt","content":"Cover image for jaxs.onl"}],["$","link","18",{"rel":"shortcut icon","href":"/favicon.png"}],["$","link","19",{"rel":"icon","href":"/favicon.png"}],["$","link","20",{"rel":"apple-touch-icon","href":"/icons/mask-32x32.png","sizes":"32x32","type":"image/png"}],["$","link","21",{"rel":"apple-touch-icon","href":"/icons/mask-48x48.png","sizes":"48x48","type":"image/png"}],["$","link","22",{"rel":"apple-touch-icon","href":"/icons/mask-72x72.png","sizes":"72x72","type":"image/png"}],["$","link","23",{"rel":"apple-touch-icon","href":"/icons/mask-144x144.png","sizes":"144x144","type":"image/png"}],["$","link","24",{"rel":"apple-touch-icon","href":"/icons/mask-192x192.png","sizes":"192x192","type":"image/png"}],["$","link","25",{"rel":"apple-touch-icon","href":"/icons/mask-256x256.png","sizes":"256x256","type":"image/png"}],["$","link","26",{"rel":"apple-touch-icon","href":"/icons/mask-384x384.png","sizes":"384x384","type":"image/png"}],["$","link","27",{"rel":"apple-touch-icon","href":"/icons/mask-512x512.png","sizes":"512x512","type":"image/png"}]],"error":null,"digest":"$undefined"}
13:{"metadata":"$b:metadata","error":null,"digest":"$undefined"}
