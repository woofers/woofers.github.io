1:"$Sreact.fragment"
2:I[6761,["517","static/chunks/517-bdd0b5d5da77e85f.js","755","static/chunks/755-3587c4ecb19090c1.js","177","static/chunks/app/layout-17292ad9eab6358e.js"],"ThemeProvider"]
3:I[1446,[],""]
4:I[8748,[],""]
5:"$Sreact.view_transition"
b:I[1646,[],""]
:HL["/_next/static/media/93f479601ee12b01-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
:HL["/_next/static/css/65a38505255551d0.css","style"]
:HL["/_next/static/css/bc0c8788dc67e800.css","style"]
:HL["/_next/static/css/b9e59270efb3d9c1.css","style"]
:HL["/_next/static/css/fa5515d2d4b15322.css","style"]
:HL["/_next/static/css/242285723340ef3a.css","style"]
:HL["/_next/static/css/19582c8e045a8270.css","style"]
:HL["/_next/static/css/08610e680134a8d2.css","style"]
:HL["/_next/static/css/7d4b05fb122450e7.css","style"]
0:{"P":null,"b":"7MfpOvNo43S4wNQJrzEHr","p":"","c":["","blog","yaml-github-actions",""],"i":false,"f":[[["",{"children":["(index)",{"children":["blog",{"children":[["slug","yaml-github-actions","c"],{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/65a38505255551d0.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/bc0c8788dc67e800.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/b9e59270efb3d9c1.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/fa5515d2d4b15322.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","html",null,{"lang":"en","suppressHydrationWarning":true,"className":"__variable_e2c820","children":[["$","head",null,{"children":[["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\n  ((a,b)=>{try{let c=localStorage.getItem(a)||b,d=\"system\"===c?window.matchMedia(\"(prefers-color-scheme: dark)\").matches?\"dark\":\"light\":c,e=document.querySelector('meta[name=\"theme-color\"]');e&&(\"dark\"===d?e.setAttribute(\"content\",\"#14120b\"):e.setAttribute(\"content\",\"#f9f9f9\"))}catch(a){}})('theme', 'system')"}}],["$","script",null,{"src":"/scripts/onload.js"}]]}],["$","body",null,{"suppressHydrationWarning":true,"children":["$","div",null,{"id":"__next","children":["$","$L2",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":404}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]}]]}]]}],{"children":["(index)",["$","$1","c",{"children":[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/242285723340ef3a.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]],["$","$5",null,{"default":"none","share":"fade","name":"page","children":["$","div",null,{"className":"b0lio20","style":{},"ref":"$undefined","children":["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:style","children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:1:props:style","children":404}],["$","div",null,{"style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:style","children":["$","h2",null,{"style":"$0:f:0:1:1:props:children:1:props:children:1:props:children:props:children:props:children:props:notFound:0:1:props:children:props:children:2:props:children:props:style","children":"This page could not be found."}]}]]}]}]],[]],"forbidden":"$undefined","unauthorized":"$undefined"}]}]}]]}],{"children":["blog",["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":[["slug","yaml-github-actions","c"],["$","$1","c",{"children":[null,["$","$L3",null,{"parallelRouterKey":"children","error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","forbidden":"$undefined","unauthorized":"$undefined"}]]}],{"children":["__PAGE__",["$","$1","c",{"children":["$L6",[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/19582c8e045a8270.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}],"$L7","$L8"],"$L9"]}],{},null,false]},null,false]},null,false]},null,false]},null,false],"$La",false]],"m":"$undefined","G":["$b",[]],"s":false,"S":true}
c:I[3070,[],"OutletBoundary"]
e:I[5822,[],"AsyncMetadataOutlet"]
10:I[3070,[],"ViewportBoundary"]
12:I[3070,[],"MetadataBoundary"]
13:"$Sreact.suspense"
7:["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/08610e680134a8d2.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]
8:["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/7d4b05fb122450e7.css","precedence":"next","crossOrigin":"$undefined","nonce":"$undefined"}]
9:["$","$Lc",null,{"children":["$Ld",["$","$Le",null,{"promise":"$@f"}]]}]
a:["$","$1","h",{"children":[null,[["$","$L10",null,{"children":"$L11"}],["$","meta",null,{"name":"next-size-adjust","content":""}]],["$","$L12",null,{"children":["$","div",null,{"hidden":true,"children":["$","$13",null,{"fallback":null,"children":"$L14"}]}]}]]}]
15:I[2281,["584","static/chunks/584-d512ad299cfb1414.js","635","static/chunks/635-49840067d1b5af69.js","755","static/chunks/755-3587c4ecb19090c1.js","297","static/chunks/297-bd228610d2949346.js","489","static/chunks/app/(index)/blog/%5B...slug%5D/page-35d6a2a28b14a283.js"],"SlideLink"]
16:I[4545,["584","static/chunks/584-d512ad299cfb1414.js","635","static/chunks/635-49840067d1b5af69.js","755","static/chunks/755-3587c4ecb19090c1.js","297","static/chunks/297-bd228610d2949346.js","489","static/chunks/app/(index)/blog/%5B...slug%5D/page-35d6a2a28b14a283.js"],"Mdx"]
17:T9841,var Component=(()=>{var k=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var m=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),g=(s,e)=>{for(var n in e)r(s,n,{get:e[n],enumerable:!0})},h=(s,e,n,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of y(e))!u.call(s,l)&&l!==n&&r(s,l,{get:()=>e[l],enumerable:!(a=p(e,l))||a.enumerable});return s};var E=(s,e,n)=>(n=s!=null?k(A(s)):{},h(e||!s||!s.__esModule?r(n,"default",{value:s,enumerable:!0}):n,s)),f=s=>h(r({},"__esModule",{value:!0}),s);var c=m((D,t)=>{t.exports=_jsx_runtime});var B={};g(B,{default:()=>d,frontmatter:()=>b});var i=E(c()),b={layout:"post",title:"NPM package deployment using YAML GitHub Actions",date:"2019-08-21",description:"Recently GitHub announced that GitHub Actions will be moving away from the original HCL syntax in-favour of a YAML format similar to Travis CI and Bitbucket Pipelines. This means that HCL style actions will no longer work after September 30, 2019. It is possible to migrate using a migration script however in-some cases it may be required to reconfigure. This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the YAML format."};function o(s){let e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...s.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:["Recently ",(0,i.jsx)(e.a,{href:"http://github.com",children:"GitHub"})," announced that ",(0,i.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," will be ",(0,i.jsx)(e.a,{href:"https://github.blog/2019-08-08-github-actions-now-supports-ci-cd/",children:"moving away"})," from the original ",(0,i.jsx)(e.a,{href:"https://github.com/hashicorp/hcl",children:"HCL"})," syntax in-favour of a ",(0,i.jsx)(e.a,{href:"https://yaml.org/",children:"YAML"}),` format
similar to `,(0,i.jsx)(e.a,{href:"https://travis-ci.org/",children:"Travis CI"})," and ",(0,i.jsx)(e.a,{href:"https://bitbucket.org/product/features/pipelines",children:"Bitbucket Pipelines"}),".  This means that ",(0,i.jsx)(e.a,{href:"https://github.com/hashicorp/hcl",children:"HCL"})," style actions will no longer work ",(0,i.jsx)(e.a,{href:"https://developer.github.com/actions/",children:"after September 30, 2019"}),".  It is possible to migrate using a ",(0,i.jsx)(e.a,{href:"https://help.github.com/en/articles/migrating-github-actions-from-hcl-syntax-to-yaml-syntax",children:"migration script"})," however in-some cases it may be required to reconfigure."]}),`
`,(0,i.jsxs)(e.p,{children:["This particular issue occurred to me as actions which return a neutral result seem to fail the whole build with the ",(0,i.jsx)(e.a,{href:"https://yaml.org/",children:"YAML"})," format.  This means that using ",(0,i.jsx)(e.a,{href:"https://github.com/actions/bin/tree/master/filter/bin",children:"actions/bin/filter"})," to trigger a deploy would fail the build unless a release tag was found.  With this in mind, reconfiguring my ",(0,i.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," seemed like the best choice."]}),`
`,(0,i.jsx)("a",{id:"orgb58448b"}),`
`,(0,i.jsxs)(e.h2,{id:"desired-behaviour",children:[(0,i.jsx)(e.a,{className:"anchor",href:"#desired-behaviour",children:(0,i.jsx)(e.span,{className:"icon icon-link"})}),"Desired Behaviour"]}),`
`,(0,i.jsxs)(e.p,{children:["My particular use of ",(0,i.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," is for deploying my small ",(0,i.jsx)(e.a,{href:"https://docs.npmjs.com/creating-node-js-modules",children:"NPM packages"}),"."]}),`
`,(0,i.jsx)(e.p,{children:"To keep it simple I wanted the following to occur:"}),`
`,(0,i.jsxs)(e.ul,{children:[`
`,(0,i.jsx)(e.li,{children:"Install dependencies, Build and Test package on each commit"}),`
`,(0,i.jsx)(e.li,{children:"Publish package if a release tag was created"}),`
`]}),`
`,(0,i.jsx)("a",{id:"org521573d"}),`
`,(0,i.jsxs)(e.h2,{id:"creating-the-action-configuration",children:[(0,i.jsx)(e.a,{className:"anchor",href:"#creating-the-action-configuration",children:(0,i.jsx)(e.span,{className:"icon icon-link"})}),"Creating the Action Configuration"]}),`
`,(0,i.jsxs)(e.p,{children:["Create the file ",(0,i.jsx)(e.code,{children:".github/workflows/workflow.yml"})]}),`
`,(0,i.jsx)("a",{id:"org9bc8afb"}),`
`,(0,i.jsxs)(e.h3,{id:"checking-for-tag",children:[(0,i.jsx)(e.a,{className:"anchor",href:"#checking-for-tag",children:(0,i.jsx)(e.span,{className:"icon icon-link"})}),"Checking for Tag"]}),`
`,(0,i.jsx)(e.p,{children:"This method simply builds and tests the package on any commit."}),`
`,(0,i.jsxs)(e.p,{children:["Then if it finds a tag starting with ",(0,i.jsx)(e.strong,{children:"v"}),", it will trigger a deploy."]}),`
`,(0,i.jsxs)(e.p,{children:["So if a ",(0,i.jsx)(e.a,{href:"https://help.github.com/en/articles/creating-releases",children:"GitHub Release"})," is created with the tag ",(0,i.jsx)(e.strong,{children:"v2.3.4"}),", it will trigger a deploy."]}),`
`,(0,i.jsx)(e.p,{children:"This is a bit naive however for my purposes I usually don't tag unless its a release."}),`
`,(0,i.jsx)(e.p,{children:"One advantage of checking for a tag this way is that it cuts down on unneeded builds as a whole build can only ever run 1 or 2 times (2 in the case a build is deployed)."}),`
`,(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.a,{href:"https://github.com/features/actions",children:"GitHub Actions"})," docs mentions being able to ",(0,i.jsx)(e.a,{href:"https://help.github.com/en/articles/workflow-syntax-for-github-actions#example-restricting-the-workflow-run-to-specific-refs-and-paths",children:"restrict actions"})," to certain branches or tags however I could not get this to work."]}),`
`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki shiki-themes github-light catppuccin-mocha",style:{backgroundColor:"#fff","--shiki-dark-bg":"#1e1e2e",color:"#24292e","--shiki-dark":"#cdd6f4"},tabIndex:"0",children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" build"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Name Action Build"})]}),`
`,(0,i.jsx)(e.span,{className:"line"}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#005CC5","--shiki-dark":"#FAB387"},children:"on"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:" ["}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:"push"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"]"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"  # Trigger on push"})]}),`
`,(0,i.jsx)(e.span,{className:"line"}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"jobs"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"  run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"    runs-on"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" ubuntu-latest"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                         # Run on Ubuntu Docker image"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"    steps"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Checkout Repo"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                          # Checkout repo"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      uses"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" actions/checkout@v1"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Use Node.js"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                            # Configure Node.js"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      uses"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" actions/setup-node@v1"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      with"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        node-version"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" '12.9'"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                       # Set Node.js Version"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        registry-url"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" 'https://registry.npmjs.org'"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Set Node.js reigistry"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Deploy Info"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                            # Print GitHub Deploy info"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      env"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        GITHUB_CONTEXT"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" ${{ toJson(github) }}"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:' echo "$GITHUB_CONTEXT"'})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Install"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                                # Install dependancies"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm install"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Build"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                                  # Build app if needed"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm run build --if-present"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Test"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm run test --if-present"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"               # Run tests if needed"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Publish"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      if"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" startsWith(github.ref, 'refs/tags/v')"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"    # Check if publish step should run"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm publish --access public"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"             # Publish package"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      env"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        NODE_AUTH_TOKEN"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" ${{ secrets.NPM_AUTH_TOKEN }}"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Set NPM auth token from GitHub Secrets"})]})]})})}),`
`,(0,i.jsx)("a",{id:"org2d248b4"}),`
`,(0,i.jsxs)(e.h3,{id:"checking-for-a-release",children:[(0,i.jsx)(e.a,{className:"anchor",href:"#checking-for-a-release",children:(0,i.jsx)(e.span,{className:"icon icon-link"})}),"Checking for a Release"]}),`
`,(0,i.jsxs)(e.p,{children:["If you found the previous method too naive, you may want to check for a ",(0,i.jsx)(e.a,{href:"https://help.github.com/en/articles/creating-releases",children:"GitHub Release"})," before triggering a deploy."]}),`
`,(0,i.jsxs)(e.p,{children:["The drawback to this is that a few extraneous builds will be triggered as the ",(0,i.jsx)(e.code,{children:"release"})," event will fire both when the release is ",(0,i.jsx)(e.code,{children:"created"})," and ",(0,i.jsx)(e.code,{children:"published"}),".  As far as I am aware this can not be restricted using the ",(0,i.jsx)(e.code,{children:"on"})," property."]}),`
`,(0,i.jsxs)(e.p,{children:["To ensure we only deploy once, we will indicate to only run the ",(0,i.jsx)(e.strong,{children:"Publish"})," step when a release is ",(0,i.jsx)(e.code,{children:"published"}),"."]}),`
`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki shiki-themes github-light catppuccin-mocha",style:{backgroundColor:"#fff","--shiki-dark-bg":"#1e1e2e",color:"#24292e","--shiki-dark":"#cdd6f4"},tabIndex:"0",children:(0,i.jsxs)(e.code,{children:[(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" build"})]}),`
`,(0,i.jsx)(e.span,{className:"line"}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#005CC5","--shiki-dark":"#FAB387"},children:"on"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"  push"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"     # Run build on push (commit in most cases)"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"    tag"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:" []"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Only run build if not tagged"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"  release"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"  # Run build on release"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"    tag"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" v*"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"    # Check for release tag"})]}),`
`,(0,i.jsx)(e.span,{className:"line"}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"jobs"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"  run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"    runs-on"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" ubuntu-latest"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                         # Run on Ubuntu Docker image"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"    steps"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Checkout Repo"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                          # Checkout repo"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      uses"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" actions/checkout@v1"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Use Node.js"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                            # Configure Node.js"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      uses"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" actions/setup-node@v1"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      with"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        node-version"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" '12.9'"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                       # Set Node.js Version"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        registry-url"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" 'https://registry.npmjs.org'"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Set Node.js reigistry"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Deploy Info"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                            # Print GitHub Deploy info"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      env"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        GITHUB_CONTEXT"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" ${{ toJson(github) }}"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:' echo "$GITHUB_CONTEXT"'})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Install"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                                # Install dependancies"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm install"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Build"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"                                  # Build app if needed"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm run build --if-present"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Test"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm run test --if-present"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"               # Run tests if needed"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"    -"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:" name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" Publish"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      if"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" github.event_name == 'release' && github.event.action == 'published'"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Check if publish step should run"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      run"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" npm publish --access public"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:"             # Publish package"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"      env"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"})]}),`
`,(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"        NODE_AUTH_TOKEN"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:":"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-dark":"#A6E3A1"},children:" ${{ secrets.NPM_AUTH_TOKEN }}"}),(0,i.jsx)(e.span,{style:{color:"#6A737D","--shiki-light-font-style":"inherit","--shiki-dark":"#9399B2","--shiki-dark-font-style":"italic"},children:" # Set NPM auth token from GitHub Secrets"})]})]})})}),`
`,(0,i.jsx)("a",{id:"org515fedd"}),`
`,(0,i.jsxs)(e.h2,{id:"setting-npm-auth-token-secret",children:[(0,i.jsx)(e.a,{className:"anchor",href:"#setting-npm-auth-token-secret",children:(0,i.jsx)(e.span,{className:"icon icon-link"})}),"Setting NPM Auth Token Secret"]}),`
`,(0,i.jsxs)(e.p,{children:["Simply go to your repo ",(0,i.jsx)(e.strong,{children:"Settings"})," and select the ",(0,i.jsx)(e.strong,{children:"Secrets"})," tab."]}),`
`,(0,i.jsxs)(e.p,{children:["Then ",(0,i.jsx)(e.strong,{children:"Add a new secret"})," with the ",(0,i.jsx)(e.strong,{children:"Name"})," of ",(0,i.jsx)(e.code,{children:"NPM_AUTH_TOKEN"})," and set the ",(0,i.jsx)(e.strong,{children:"Value"})," to your ",(0,i.jsx)(e.a,{href:"https://docs.npmjs.com/creating-and-viewing-authentication-tokens",children:"NPM token"}),"."]}),`
`,(0,i.jsx)("a",{id:"org5d470fc"}),`
`,(0,i.jsxs)(e.h2,{id:"adding-the-github-actions-badge",children:[(0,i.jsx)(e.a,{className:"anchor",href:"#adding-the-github-actions-badge",children:(0,i.jsx)(e.span,{className:"icon icon-link"})}),"Adding the GitHub Actions badge"]}),`
`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:"http://github.com",children:"GitHub"})," now offers an undocumented API which will return nice ",(0,i.jsx)(e.a,{href:"https://travis-ci.org/",children:"Travis CI"})," like status badge."]}),`
`,(0,i.jsxs)(e.p,{children:["An example can be seen on the ",(0,i.jsx)(e.a,{href:"https://github.com/actions/toolkit",children:"actions/toolkit"})," repo."]}),`
`,(0,i.jsx)(e.p,{children:"The format for the API is as follows:"}),`
`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki shiki-themes github-light catppuccin-mocha",style:{backgroundColor:"#fff","--shiki-dark-bg":"#1e1e2e",color:"#24292e","--shiki-dark":"#cdd6f4"},tabIndex:"0",children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#CDD6F4"},children:"https://github.com/"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"user|org"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:">"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#CDD6F4"},children:"/"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"repo"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:">"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#CDD6F4"},children:"/"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:"<"}),(0,i.jsx)(e.span,{style:{color:"#22863A","--shiki-dark":"#89B4FA"},children:"action_name"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#94E2D5"},children:">"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#CDD6F4"},children:"/badge.svg"})]})})})}),`
`,(0,i.jsxs)(e.p,{children:["The ",(0,i.jsx)(e.code,{children:"action_name"})," propery is the ",(0,i.jsx)(e.code,{children:"name"})," field in the ",(0,i.jsx)(e.a,{href:"https://yaml.org/",children:"YAML"})," which in this case is ",(0,i.jsx)(e.code,{children:"build"}),"."]}),`
`,(0,i.jsx)(e.p,{children:"An example of this would be:"}),`
`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki shiki-themes github-light catppuccin-mocha",style:{backgroundColor:"#fff","--shiki-dark-bg":"#1e1e2e",color:"#24292e","--shiki-dark":"#cdd6f4"},tabIndex:"0",children:(0,i.jsx)(e.code,{children:(0,i.jsx)(e.span,{className:"line",children:(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#CDD6F4"},children:"https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg"})})})})}),`
`,(0,i.jsx)(e.p,{children:"To make it even nicer we can link the badge to our repo's actions page:"}),`
`,(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(e.pre,{className:"shiki shiki-themes github-light catppuccin-mocha",style:{backgroundColor:"#fff","--shiki-dark-bg":"#1e1e2e",color:"#24292e","--shiki-dark":"#cdd6f4"},tabIndex:"0",children:(0,i.jsx)(e.code,{children:(0,i.jsxs)(e.span,{className:"line",children:[(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#B4BEFE"},children:"["}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-light-text-decoration":"underline","--shiki-dark":"#89B4FA","--shiki-dark-text-decoration":"inherit"},children:"!["}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-light-text-decoration":"underline","--shiki-dark":"#A6E3A1","--shiki-dark-text-decoration":"inherit"},children:"img"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-light-text-decoration":"underline","--shiki-dark":"#89B4FA","--shiki-dark-text-decoration":"inherit"},children:"]"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-light-text-decoration":"underline","--shiki-dark":"#9399B2","--shiki-dark-text-decoration":"inherit"},children:"("}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-light-text-decoration":"underline","--shiki-dark":"#89B4FA","--shiki-dark-text-decoration":"inherit"},children:"https://github.com/woofers/ludum-dare-badges/workflows/build/badge.svg"}),(0,i.jsx)(e.span,{style:{color:"#032F62","--shiki-light-text-decoration":"underline","--shiki-dark":"#9399B2","--shiki-dark-text-decoration":"inherit"},children:")"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#B4BEFE"},children:"]"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:"("}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-light-text-decoration":"underline","--shiki-dark":"#89B4FA","--shiki-dark-text-decoration":"inherit"},children:"https://github.com/woofers/ludum-dare-badges/actions"}),(0,i.jsx)(e.span,{style:{color:"#24292E","--shiki-dark":"#9399B2"},children:")"})]})})})}),`
`,(0,i.jsx)(e.p,{children:"It will look something like this:"})]})}function d(s={}){let{wrapper:e}=s.components||{};return e?(0,i.jsx)(e,{...s,children:(0,i.jsx)(o,{...s})}):o(s)}return f(B);})();
;return Component;6:["$","div",null,{"className":"_1mtlrut1 _1mtlrut0","style":{},"ref":"$undefined","children":[["$","div",null,{"className":"mm062y5r mm062y5s","style":{"--mm062y5o":"20px","--mm062y5p":"120px"},"ref":"$undefined","aria-hidden":true,"children":"$undefined"}],["$","main",null,{"className":"_1mtlrut2","style":{},"ref":"$undefined","children":[["$","$5",null,{"default":"none","share":"slide-in","enter":"none","name":"blog-title-yaml-github-actions","children":["$","$L15",null,{"href":"/","altLabel":"<-- Back","ariaLabel":"Back to homepage","marginBottom":"$$400","children":"NPM package deployment using YAML GitHub Actions"}]}],["$","time",null,{"className":"mm062y29 mm062y8o mm062y69 mm062y63 mm062y3","style":{"--mm062y26":"var(--space-200)","--mm062y66":"15px","--mm062y60":"medium","--mm062y0":"var(--color-text-primary)"},"ref":"$undefined","dateTime":"2019-08-21T00:00:00.000Z","title":"Tuesday, August 20, 2019","children":"August 20, 2019"}],["$","$L16",null,{"code":"$17"}]]}]]}]
11:[["$","meta","0",{"charSet":"utf-8"}],["$","meta","1",{"name":"viewport","content":"width=device-width, initial-scale=1, viewport-fit=cover"}],["$","meta","2",{"name":"theme-color","content":"#f9f9f9"}]]
d:null
18:I[4430,[],"IconMark"]
f:{"metadata":[["$","title","0",{"children":"NPM package deployment using YAML GitHub Actions | Jaxson Van Doorn"}],["$","meta","1",{"name":"description","content":"All-around developer, half-designer and tinkerer."}],["$","link","2",{"rel":"manifest","href":"/manifest.webmanifest","crossOrigin":"$undefined"}],["$","meta","3",{"name":"creator","content":"Jaxson Van Doorn"}],["$","meta","4",{"name":"publisher","content":"Jaxson Van Doorn"}],["$","meta","5",{"property":"og:title","content":"Jaxson Van Doorn"}],["$","meta","6",{"property":"og:description","content":"All-around developer, half-designer and tinkerer."}],["$","meta","7",{"property":"og:image:type","content":"image/png"}],["$","meta","8",{"property":"og:image","content":"https://jaxs.onl/meta-image.png"}],["$","meta","9",{"property":"og:image:alt","content":"Cover image for jaxs.onl"}],["$","meta","10",{"property":"og:image:width","content":"1200"}],["$","meta","11",{"property":"og:image:height","content":"630"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:creator","content":"@jaxsonvandoorn"}],["$","meta","14",{"name":"twitter:title","content":"NPM package deployment using YAML GitHub Actions"}],["$","meta","15",{"name":"twitter:description","content":"All-around developer, half-designer and tinkerer."}],["$","meta","16",{"name":"twitter:image","content":"https://jaxs.onl/meta-image.png"}],["$","meta","17",{"name":"twitter:image:alt","content":"Cover image for jaxs.onl"}],["$","link","18",{"rel":"shortcut icon","href":"/favicon.png"}],["$","link","19",{"rel":"icon","href":"/favicon.png"}],["$","link","20",{"rel":"apple-touch-icon","href":"/icons/mask-32x32.png","sizes":"32x32","type":"image/png"}],["$","link","21",{"rel":"apple-touch-icon","href":"/icons/mask-48x48.png","sizes":"48x48","type":"image/png"}],["$","link","22",{"rel":"apple-touch-icon","href":"/icons/mask-72x72.png","sizes":"72x72","type":"image/png"}],["$","link","23",{"rel":"apple-touch-icon","href":"/icons/mask-144x144.png","sizes":"144x144","type":"image/png"}],["$","link","24",{"rel":"apple-touch-icon","href":"/icons/mask-192x192.png","sizes":"192x192","type":"image/png"}],["$","link","25",{"rel":"apple-touch-icon","href":"/icons/mask-256x256.png","sizes":"256x256","type":"image/png"}],["$","link","26",{"rel":"apple-touch-icon","href":"/icons/mask-384x384.png","sizes":"384x384","type":"image/png"}],["$","link","27",{"rel":"apple-touch-icon","href":"/icons/mask-512x512.png","sizes":"512x512","type":"image/png"}],["$","$L18","28",{}]],"error":null,"digest":"$undefined"}
14:"$f:metadata"
