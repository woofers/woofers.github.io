{"version":3,"sources":["webpack:///./src/pages/blog.js","webpack:///./src/components/og-image.js","webpack:///./src/components/title.js","webpack:///./src/components/page.js","webpack:///./src/components/content.js"],"names":["org","theme","css","margins","small","BlogIndex","sortedPosts","posts","this","props","data","allOrgContent","edges","date","node","meta","sort","a","b","func","safeCompare","Date","render","siteMeta","site","siteMetadata","title","nav","_posts","map","_ref","path","fields","slug","include","blog","startsWith","preview","cheerio","load","html","find","remove","Object","_emotion_core__WEBPACK_IMPORTED_MODULE_4__","marginBottom","medium","key","superSmall","gatsby__WEBPACK_IMPORTED_MODULE_6__","lineHeight","fonts","large","to","style","fontWeight","length","_components_content__WEBPACK_IMPORTED_MODULE_9__","color","colors","text","aria-label","continueReading","_components_page__WEBPACK_IMPORTED_MODULE_8__","React","Component","pageQuery","url","OgImage","p","api","core_browser_esm","Helmet_default","property","content","Title","og_image","children","Page","title_Title","Content","hide","_emotion_core__WEBPACK_IMPORTED_MODULE_1__","hideTitle","dangerouslySetInnerHTML","__html"],"mappings":"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","file":"component---src-pages-blog-js-3f6a1a7b186d1651ad47.js","sourcesContent":["import React from 'react'\nimport { Link, graphql } from 'gatsby'\nimport { css } from '@emotion/core'\nimport cheerio from 'cheerio'\nimport { Page } from '../components/page'\nimport { Content } from '../components/content'\n\nconst org = theme => css`\n  div {\n    margin-bottom: ${theme.margins.small};\n  }\n`\n\nclass BlogIndex extends React.Component {\n  sortedPosts() {\n    let posts = this.props.data.allOrgContent.edges\n    const date = (node) => node.meta ? node.meta.date : ''\n    const safeCompare = (a, b, func) =>\n      (a || b) ? (!a ? 1 : !b ? -1 : func(a, b) ? 1 : -1) : 0;\n    posts.sort(function(a, b) {\n      return safeCompare(date(a.node), date(b.node), (a, b) => new Date(a) < new Date(b));\n    });\n    return posts\n  }\n\n  render() {\n    const continueReading = 'Continue reading'\n    const siteMeta = this.props.data.site.siteMetadata\n    const site = siteMeta.title\n    const nav = siteMeta.nav\n    const _posts = this.sortedPosts().map (({ node }) => {\n      const path = node.fields.slug\n      const meta = node.meta\n      const title = meta.title || path\n      const include = nav.blog\n      const date = meta.date\n      if (!path || !path.startsWith(include)) return null\n      let preview = cheerio.load(node.html)('p', 'body')\n      preview.find('h1').remove()\n      return (\n        <div css={ theme => ({ marginBottom: theme.margins.medium }) } key={path}>\n          <h1 css={ theme => ({ marginBottom: theme.margins.superSmall }) }>\n            <Link css={ theme => ({ lineHeight: theme.fonts.large }) } to={node.fields.slug}>{title}</Link>\n          </h1>\n          {date ? <span style={{ fontWeight: 'bold' }}>{date}</span> : null }\n          { preview.length ?\n            <div>\n              <Content html={preview.html()} />\n              <Link css={ theme => ({ color: `${theme.colors.text} !important` }) } to={node.fields.slug}\n                    aria-label={`${continueReading} ${title}`}>\n                  {continueReading} . . .\n              </Link>\n            </div>: null}\n        </div>\n      )\n    })\n    return (\n      <Page title='Posts' site={site}>\n        <div css={org}>\n          {_posts}\n        </div>\n      </Page>\n    )\n  }\n}\n\nexport default BlogIndex\n\nexport const pageQuery = graphql`\n  {\n    ...Title\n    ...Nav\n    allOrgContent {\n      edges {\n        node {\n          ...Content\n        }\n      }\n    }\n  }\n`\n","import React from 'react'\nimport Helmet from 'react-helmet'\n\nconst size = 300\nconst url = 'https://opengraph.vandoorn.ca'\nconst image = `${url}/jvd.png`\n\nconst OgImage = p => {\n  const api = `${url}/**${p.title}**.png?&md=1&images=${image}&widths=${size}&heights=${size}`\n  return (\n    <Helmet>\n      <meta property=\"og:image\" content={api} />\n    </Helmet>\n  )\n}\n\nexport default OgImage\n","import React from 'react'\nimport Helmet from 'react-helmet'\nimport OgImage from './og-image'\n\nconst makeTitle = (title, site) => {\n  if (!title) return site\n  if (!site) return title\n  return `${title} - ${site}`\n}\n\nexport const Title = p => (\n  <div>\n    <Helmet>\n      <meta property=\"og:title\" content={p.title} />\n      <title>{makeTitle(p.title, p.site)}</title>\n    </Helmet>\n    <OgImage title={p.title} />\n    {p.children}\n  </div>\n)\n","import React from 'react'\nimport { Title } from '../components/title'\n\nexport const Page = p => (\n  <Title title={p.title} site={p.site}>\n    <article>\n      {p.children}\n    </article>\n  </Title>\n)\n","import React from 'react'\nimport { css } from '@emotion/core'\n\nexport const Content = p => {\n  const hide = css`\n    div:first-of-type h1 {\n      display: none;\n    }\n  `\n  const org = theme => css`\n    ${p.hideTitle ? hide : ''}\n    div {\n      margin-bottom: ${theme.margins.small};\n      text-align: 'left';\n    }\n  `\n  return (\n    <div css={org}\n       dangerouslySetInnerHTML={{ __html: p.html }} />\n  )\n}\n"],"sourceRoot":""}