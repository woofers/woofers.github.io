var camera,cameraY,loadedLoadingScreen,saveLoaded,debugShow,digDelay,jumpDelay,currentTime,delay,mudTile,soundDelay,soundPlay,chapter1={},checkpoint=((chapter1=function(e){}).prototype={preload:function(){debugShow=!1,currentScreen=1,sav.cameraY=1208,game.time.advancedTiming=!0,soundPlay=!1,game.add.sprite(0,0,"loadingScreen"),game.load.image("pausedImage","assets/images/ui/pause.png"),game.load.image("bg","assets/levels/level1/level.png"),game.load.tilemap("dug","assets/levels/level1/dug.json",null,Phaser.Tilemap.TILED_JSON),game.load.tilemap("map","assets/levels/level1/bottom.json",null,Phaser.Tilemap.TILED_JSON),game.load.tilemap("tunnel1","assets/levels/level1/tunnel1.json",null,Phaser.Tilemap.TILED_JSON),game.load.tilemap("tunnel2","assets/levels/level1/tunnel2.json",null,Phaser.Tilemap.TILED_JSON),game.load.tilemap("top","assets/levels/level1/top.json",null,Phaser.Tilemap.TILED_JSON),game.load.tilemap("objects","assets/levels/level1/objects.json",null,Phaser.Tilemap.TILED_JSON),game.load.image("tiles","assets/levels/level1/tiles.png"),game.load.atlasXML("playerSprite","assets/images/sprites/fox.png","assets/images/sprites/fox.xml"),game.load.atlasXML("croc1Sprite","assets/images/sprites/croc1.png","assets/images/sprites/croc1.xml"),game.load.atlasXML("checkpointSprite","assets/images/sprites/checkpoint.png","assets/images/sprites/checkpoint.xml"),game.load.image("treeSprite","assets/images/sprites/tree.png"),game.load.audio("gameMusic",["assets/music/chapter1.mp3","assets/music/chapter1.ogg"]),game.load.audio("checkpointSound",["assets/sfx/checkpoint.mp3","assets/sfx/checkpoint.ogg"]),game.load.audio("deathSound",["assets/sfx/death.mp3","assets/sfx/death.ogg"]),game.load.audio("tailWhipSound",["assets/sfx/tailWhip.mp3","assets/sfx/tailWhip.ogg"]),game.load.audio("walkSound",["assets/sfx/walk.mp3","assets/sfx/walk.ogg"]),game.load.audio("hitSound",["assets/sfx/hit.mp3","assets/sfx/hit.ogg"]),game.load.audio("digSound",["assets/sfx/dig.mp3","assets/sfx/dig.ogg"]),game.load.audio("digDelaySound",["assets/sfx/digDelay.mp3","assets/sfx/digDelay.ogg"])},create:function(){game.physics.startSystem(Phaser.Physics.ARCADE),bg=game.add.sprite(0,-40,"bg"),chapter1.prototype.loadMap(),checkpoint.prototype.load(),croc1Functions.prototype.load(),playerFunctions.prototype.load(),tree.prototype.load(),chapter1.prototype.playMusic(),pauseMenu.prototype.pauseGame(),pauseMenu.prototype.loadPauseBg(),gobalFunctions.prototype.sfxDelay(),playerFunctions.prototype.varibleSet(),camera=game.world.setBounds(.5,0,16e3,sav.cameraY),cameraFollow=game.camera.follow(player),cursors=game.input.keyboard.createCursorKeys(),upButton=game.input.keyboard.addKey(Phaser.Keyboard.W),downButton=game.input.keyboard.addKey(Phaser.Keyboard.S),leftButton=game.input.keyboard.addKey(Phaser.Keyboard.A),rightButton=game.input.keyboard.addKey(Phaser.Keyboard.D),attackButton=game.input.keyboard.addKey(Phaser.Keyboard.R),attackButton2=game.input.keyboard.addKey(Phaser.Keyboard.T),jumpButton=game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),pauseButton=game.input.keyboard.addKey(Phaser.Keyboard.ESC),select=game.input.keyboard.addKey(Phaser.Keyboard.ENTER),backSelect=game.input.keyboard.addKey(Phaser.Keyboard.BACKSPACE),game.physics.arcade.TILE_BIAS=120,console.log("Copyright 2014, Jaxson C. Van Doorn and Avery M. Suzuki")},loadMap:function(){dug=game.add.tilemap("dug"),map=game.add.tilemap("map"),tunnel1=game.add.tilemap("tunnel1"),tunnel2=game.add.tilemap("tunnel2"),topMap=game.add.tilemap("top"),objectsMap=game.add.tilemap("objects"),dug.addTilesetImage("tiles","tiles"),map.addTilesetImage("tiles","tiles"),tunnel1.addTilesetImage("tiles","tiles"),tunnel2.addTilesetImage("tiles","tiles"),topMap.addTilesetImage("tiles","tiles"),objectsMap.addTilesetImage("tiles","tiles"),layerDug=dug.createLayer("dug"),layerTunnel1=tunnel1.createLayer("collisionLayer"),layerTunnel2=tunnel2.createLayer("collisionLayer"),layerMaster=map.createLayer("collisionLayer"),layerTop=topMap.createLayer("collisionLayer"),layerObjects=objectsMap.createLayer("collisionLayer"),map.setCollisionBetween(0,47),tunnel1.setCollisionBetween(0,47),tunnel2.setCollisionBetween(0,47),topMap.setCollisionBetween(0,47),objectsMap.setCollisionBetween(0,47)},playMusic:function(){music=game.add.audio("gameMusic",1,!0),checkpointSfx=game.add.audio("checkpointSound",1,!0),deathSfx=game.add.audio("deathSound",1,!0),tailWhipSfx=game.add.audio("tailWhipSound",1,!0),walkSfx=game.add.audio("walkSound",1,!0),hitSfx=game.add.audio("hitSound",1,!0),digSfx=game.add.audio("digSound",1,!0),digDelaySfx=game.add.audio("digDelaySound",1,!0),music.play("",0,1,!0)},update:function(){game.physics.arcade.collide(player,layerTop,playerFunctions.prototype.topLayer),game.physics.arcade.collide(player,layerTunnel1),game.physics.arcade.collide(player,layerTunnel2,playerFunctions.prototype.tunnel1),game.physics.arcade.collide(player,layerMaster,playerFunctions.prototype.tunnel2),game.physics.arcade.collide(player,layerObjects,playerFunctions.prototype.objectsLayer),game.physics.arcade.overlap(player,croc1,croc1Functions.prototype.killCheck,null,this),game.physics.arcade.collide(croc1,layerTop),game.physics.arcade.collide(croc1,layerObjects),game.physics.arcade.overlap(player,checkpointGroup,checkpoint.prototype.activate,null,this),game.physics.arcade.collide(checkpointGroup,layerTop),game.physics.arcade.collide(treeGroup,layerTop),player.body.velocity.x=0,currentTime=game.time.now,playerFunctions.prototype.main(),gobalFunctions.prototype.camera(),croc1Functions.prototype.ai(),gobalFunctions.prototype.keyDebouncing(),2e3<currentTime-soundDelay&&(soundPlay=!0),pauseButton.isDown&&!1===keyDebouncing.enterPressed&&player.body.blocked.down&&!1===player.isDigging&&!1===player.killCheck&&!1===player.tailWhip&&(keyDebouncing.escPressed=!0,pauseMenuBg.bringToTop(),pauseMenuBg.visible=!pauseMenuBg.visible,pauseMenu.prototype.createTextPause(),game.paused=!0)},render:function(){!0===debugShow&&(game.debug.cameraInfo(game.camera,32,32),game.debug.text("isDigging: "+player.isDigging,32,128),game.debug.text("AnimationFrame: "+player.animations.currentFrame.index,32,160),game.debug.text("Animation: "+player.animations.currentAnim.name,32,192),game.debug.text("Speed: "+player.body.velocity.x,32,226),game.debug.text("Menu Selector: "+menuSelect,32,258),game.debug.spriteInfo(player,32,322),game.debug.soundInfo(music,32,400),game.debug.body(croc1.getAt(1)),game.debug.body(player))},killLevel:function(){layerTunnel1.kill(),layerTunnel2.kill(),layerTop.kill(),layerObjects.kill(),chapter1.prototype.resetLevel()},resetLevel:function(){tunnel1=game.add.tilemap("tunnel1"),tunnel2=game.add.tilemap("tunnel2"),topMap=game.add.tilemap("top"),objectsMap=game.add.tilemap("objects"),tunnel1.addTilesetImage("tiles","tiles"),tunnel2.addTilesetImage("tiles","tiles"),topMap.addTilesetImage("tiles","tiles"),objectsMap.addTilesetImage("tiles","tiles"),layerTunnel1=tunnel1.createLayer("collisionLayer"),layerTunnel2=tunnel2.createLayer("collisionLayer"),layerTop=topMap.createLayer("collisionLayer"),layerObjects=objectsMap.createLayer("collisionLayer"),tunnel1.setCollisionBetween(0,47),tunnel2.setCollisionBetween(0,47),topMap.setCollisionBetween(0,47),objectsMap.setCollisionBetween(0,47),treeGroup.parent.bringToTop(treeGroup)},save:function(){store.set("save.x",sav.x),store.set("save.chapterString","The Forest"),store.set("save.chapter",sav.chapter)},exit:function(){game.paused=!1,chapter1.prototype.save(),bg.kill(),pauseMenuBg.kill(),player.kill(),croc1.destroy(),checkpointGroup.destroy(),treeGroup.destroy(),layerDug.kill(),layerMaster.kill(),layerTunnel1.kill(),layerTunnel2.kill(),layerTop.kill(),layerObjects.kill(),music.stop(),music.volume=0,game.state.start("Menu")}},{}),croc1Functions=((checkpoint=function(e){}).prototype={load:function(){checkpointGroup=game.add.group(),checkpointGroupChilldren=objectsMap.createFromObjects("objects",52,"checkpointSprite",0,!0,!1,checkpointGroup),checkpointGroup.enableBody=!0,game.physics.arcade.enable(checkpointGroup),checkpointGroup.setAll("anchor.x",.5),checkpointGroup.setAll("scale.x",4),checkpointGroup.setAll("scale.y",4),checkpointGroup.setAll("body.bounce",0),checkpointGroup.setAll("body.gravity.y",700),checkpointGroup.setAll("smoothed",!1),checkpointGroup.callAll("animations.add","animations","activate",Phaser.Animation.generateFrameNames("checkpoint",0,16,"",4),12,!1)},activate:function(e,t){sav.x=t.x-300,!0==!t.activate&&(sav.x=t.x-300,t.activate=!0,t.animations.play("activate"),!0===soundPlay)&&checkpointSfx.play("",0,1,!1)}},{}),gobalFunctions=(croc1Funtions=function(e){},croc1Functions.prototype={load:function(){croc1=game.add.group(),croc1Chilldren=objectsMap.createFromObjects("objects",50,"croc1Sprite",0,!0,!1,croc1),croc1.enableBody=!0,game.physics.arcade.enable(croc1),croc1.setAll("anchor.x",.5),croc1.setAll("scale.x",4),croc1.setAll("scale.y",4),croc1.setAll("body.bounce",0),croc1.setAll("body.gravity.y",700),croc1.setAll("body.collideWorldBounds",!0),croc1.setAll("smoothed",!1),croc1.getAt(2).scale.x=-4,croc1.getAt(3).scale.x=-4,croc1.callAll("animations.add","animations","walk",Phaser.Animation.generateFrameNames("croc1Walk",0,1,"",4),10,!0),croc1.callAll("animations.add","animations","idle",Phaser.Animation.generateFrameNames("croc1Idle",0,1,"",4),5,!0),croc1.callAll("animations.play","animations","idle")},jumpDelay:function(){croc1.getAt(i).jumpDelay=game.time.now,croc1.getAt(i).jump=!0},ai:function(){for(i=0;i<croc1.length;i++)!1===player.dig?(4==croc1.getAt(i).scale.x&&(croc1.getAt(i).body.width=150,croc1.getAt(i).body.offset.x=-20,player.x-500<croc1.getAt(i).x&&player.x>croc1.getAt(i).x&&(croc1.getAt(i).scale.x=4,croc1.getAt(i).follow=!0),player.x+500>croc1.getAt(i).x&&player.x<croc1.getAt(i).x&&!0===croc1.getAt(i).follow&&(croc1.getAt(i).scale.x=-4),player.x-1200>croc1.getAt(i).x&&player.x>croc1.getAt(i).x&&croc1.getAt(i).body.blocked.down||!0===player.killCheck)&&(croc1.getAt(i).follow=!1,game.physics.arcade.moveToObject(croc1.getAt(i),player,0,0)),-4==croc1.getAt(i).scale.x&&(croc1.getAt(i).body.width=150,croc1.getAt(i).body.offset.x=20,player.x+500>croc1.getAt(i).x&&player.x<croc1.getAt(i).x&&(croc1.getAt(i).scale.x=-4,croc1.getAt(i).follow=!0),player.x-500<croc1.getAt(i).x&&player.x>croc1.getAt(i).x&&!0===croc1.getAt(i).follow&&(croc1.getAt(i).scale.x=4),player.x+1200<croc1.getAt(i).x&&player.x<croc1.getAt(i).x&&croc1.getAt(i).body.blocked.down||!0===player.killCheck)&&(croc1.getAt(i).follow=!1,game.physics.arcade.moveToObject(croc1.getAt(i),player,0,0)),croc1.getAt(i).body.blocked.down&&(croc1.getAt(i).body.blocked.left||croc1.getAt(i).body.blocked.right)&&(croc1.getAt(i).isJumping=!0),!0===croc1.getAt(i).isJumping&&(croc1.getAt(i).y-=30),croc1.getAt(i).body.blocked.down||!0!==croc1.getAt(i).isJumping||!0!=!croc1.getAt(i).jump||croc1Functions.prototype.jumpDelay(),125<currentTime-croc1.getAt(i).jumpDelay&&(croc1.getAt(i).isJumping=!1,croc1.getAt(i).jump=!1),!0===croc1.getAt(i).follow&&(game.physics.arcade.moveToObject(croc1.getAt(i),player,375,0),croc1.callAll("animations.play","animations","walk")),!0==!croc1.getAt(i).follow&&(croc1.getAt(i).follow=!1)):!0===player.dig&&(croc1.getAt(i).follow=!1,game.physics.arcade.moveToObject(croc1.getAt(i),player,0,0),croc1.callAll("animations.play","animations","idle"))},killCheck:function(e,t){76<e.animations.currentFrame.index&&e.animations.currentFrame.index<79||!0===e.isAnim?t.kill():!1===e.tailWhip&&e.body.blocked.down&&!1===e.isDigging?(t.animations.play("idle"),e.killCheck=!0):e.body.blocked.down||playerFunctions.prototype.kill()}},{}),FONT="Didact Gothic",BOLD_FONT="Didact Gothic",TITLE_FONT="Roboto",initFont=function(){text.title.font=TITLE_FONT,text.title.fontSize=250},player={movingRight:!((gobalFunctions=function(e){}).prototype={highlight1:function(){initFont(),text.selector1.font=BOLD_FONT,text.selector1.fontSize=80,text.selector2.font=FONT,text.selector2.fontSize=60,text.selector3.font=FONT,text.selector3.fontSize=60},highlight2:function(){initFont(),text.selector1.font=FONT,text.selector1.fontSize=60,text.selector2.font=BOLD_FONT,text.selector2.fontSize=80,text.selector3.font=FONT,text.selector3.fontSize=60},highlight3:function(){initFont(),text.selector1.font=FONT,text.selector1.fontSize=60,text.selector2.font=FONT,text.selector2.fontSize=60,text.selector3.font=BOLD_FONT,text.selector3.fontSize=80},mainText:function(){text.title.setText("FOX"),text.selector1.setText("Play"),text.selector2.setText("Settings"),text.selector3.setText("About")},settingsText:function(){text.title.setText("SETTINGS"),text.selector1.setText("Resolution - "+game.scale.width+" x "+game.scale.height),text.selector2.setText("Fullscreen - "+settings.fullscreenString),text.selector3.setText("Sound - "+settings.sound)},soundUp:function(){settings.sound+=1},soundDown:function(){--settings.sound},soundAdjust:function(){music.volume=settings.sound/10,checkpointSfx.volume=settings.sound/10,deathSfx.volume=settings.sound/10,hitSfx.volume=settings.sound/10,tailWhipSfx.volume=settings.sound/10,digSfx.volume=settings.sound/10,digDelaySfx.volume=settings.sound/10,store.set("save.settings.sound",settings.sound)},sfxDelay:function(){soundDelay=game.time.now},fullExit:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},gofull:function(){game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.startFullScreen()},camera:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){sav.cameraY=184+player.y,camera=game.world.setBounds(.5,0,15806,sav.cameraY),1536<sav.cameraY&&(sav.cameraY=1536,camera=game.world.setBounds(.5,0,15806,sav.cameraY))}),keyDebouncing:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){jumpButton.isDown||(keyDebouncing.spacePressed=!1),downButton.isDown||(keyDebouncing.downPressed=!1),cursors.down.isDown||(keyDebouncing.enterPressed=!1),attackButton.isDown||(keyDebouncing.attackPressed=!1)}),menuKeyDebouncing:function(){cursors.up.isDown||(keyDebouncing.upPressed=!1),cursors.down.isDown||(keyDebouncing.downPressed=!1),cursors.right.isDown||(keyDebouncing.rightPressed=!1),cursors.left.isDown||(keyDebouncing.leftPressed=!1),select.isDown||(keyDebouncing.enterPressed=!1),backSelect.isDown||(keyDebouncing.backPressed=!1),pauseButton.isDown||(keyDebouncing.escPressed=!1)}}),dobuleJump:!1,dig:!1,isDigging:!1,isDiggingUp:!1,isAnim:!1,directX:0,layer:1,onTile:null,tileAbove:null,tileBelow:null,tailWhip:!1,tailWhipJump:!1,hit:!1,killCheck:!1,killAnim:!1,killUnderground:!1},settings={resolutionWidth:1920,resolutionHeight:1080,fullscreen:!1,fullscreenString:"Off",sound:10,resolutionScroller:null},sav={chapter:null,chapterString:null,x:null,cameraY:null},text={title:null,selector1:null,selector2:null,selector3:null,loaded:!1},keyDebouncing={downPressed:!1,upPressed:!1,rightPressed:!1,leftPressed:!1,enterPressed:!1,backPressed:!1,attackPressed:!1,escPressed:!1},titleStyle={font:"250px Arial",fill:"#ffffff",align:"center"},menuSelect=1,currentScreen=1,_this=this,game=new Phaser.Game(1920,1080,Phaser.AUTO,"canvasdiv"),isFullscreen="Off",googleFonts=!1,mainMenu=(WebFontConfig={active:function(){game.time.events.add(Phaser.Timer.SECOND,game.state.states.Menu.createMenuText,_this),googleFonts=!0},google:{families:["Didact+Gothic","Roboto:500"]}},window.onload=function(){game.scale.maxWidth=1920,game.scale.maxHeight=1080,game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.setScreenSize(),game.state.add("Menu",mainMenu),game.state.add("chapter1",chapter1),game.state.start("Menu");function e(e){window.dispatchEvent(new Event("resize")),isFullscreen="Off"===isFullscreen?"On":"Off"}document.addEventListener("fullscreenchange",e,!1),document.addEventListener("webkitfullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1)},{}),pauseMenu=((mainMenu=function(e){}).prototype={preload:function(){game.load.script("webfont","https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),currentScreen=menuSelect=1,mainMenu.prototype.loadingScreenDisplay(),mainMenu.prototype.createSave(),mainMenu.prototype.readSave(),game.load.image("aboutScreen","assets/images/ui/about.png"),game.load.image("menuBg","assets/images/ui/orange.png"),game.load.image("loadingScreen","assets/images/ui/loading.png"),loadedLoadingScreen=!0,text.loaded=!1},loadingScreenDisplay:function(){if(!0===loadedLoadingScreen)return game.add.sprite(0,0,"loadingScreen")},checkSave:function(){return void 0===(saveLoaded=store.get("save.loaded"))},createSave:function(){mainMenu.prototype.checkSave()&&mainMenu.prototype.eraseSave()},readSave:function(){settings.sound=store.get("save.settings.sound"),sav.chapter=store.get("save.chapter"),sav.chapterString=store.get("save.chapterString"),sav.x=store.get("save.x")},eraseSave:function(){store.set("save.loaded",!0),store.set("save.settings.sound",10),store.set("save.chapter",1),store.set("save.chapterString","New File"),store.set("save.x",1412)},create:function(){menu=game.add.sprite(0,0,"menuBg"),googleFonts&&mainMenu.prototype.createMenuText(),cursors=game.input.keyboard.createCursorKeys(),select=game.input.keyboard.addKey(Phaser.Keyboard.ENTER),backSelect=game.input.keyboard.addKey(Phaser.Keyboard.BACKSPACE),pauseButton=game.input.keyboard.addKey(Phaser.Keyboard.ESC),console.log("Copyright 2014, Jaxson C. Van Doorn and Avery M. Suzuki");var e=function(e){"Off"!==isFullscreen||(3!==currentScreen||2!==menuSelect)||keyDebouncing[e+"Pressed"]||(gobalFunctions.prototype.gofull(),keyDebouncing[e+"Pressed"]=!0)};cursors.left.onDown.add(function(){return e("left")},this),cursors.right.onDown.add(function(){return e("right")},this)},createMenuText:function(){text.loaded||(text.title=game.add.text(960,240,"FOX",titleStyle),text.title.anchor.setTo(.5),text.selector1=game.add.text(960,525,"Play"),text.selector1.anchor.setTo(.5),text.selector1.fill="#ffffff",text.selector2=game.add.text(960,690,"Settings"),text.selector2.anchor.setTo(.5),text.selector2.fill="#ffffff",text.selector3=game.add.text(960,840,""),text.selector3.anchor.setTo(.5),text.selector3.fill="#ffffff",gobalFunctions.prototype.highlight1(),text.loaded=!0,mainMenu.prototype.toggleAbout())},toggleAbout:function(){(aboutMenu=game.add.sprite(0,0,"aboutScreen")).visible=!aboutMenu.visible},update:function(){!0===text.loaded&&(1==menuSelect&&gobalFunctions.prototype.highlight1(),2==menuSelect&&gobalFunctions.prototype.highlight2(),3==menuSelect&&gobalFunctions.prototype.highlight3(),1==currentScreen&&(1==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!0,currentScreen=2,menuSelect=1,mainMenu.prototype.saveText()),2==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!0,currentScreen=3,menuSelect=1),3==menuSelect)&&select.isDown&&!1===keyDebouncing.enterPressed&&gui.App.quit(),2==currentScreen&&(1==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!0,mainMenu.prototype.exit()),2==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(mainMenu.prototype.eraseSave(),mainMenu.prototype.readSave(),mainMenu.prototype.saveText()),3==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!0,aboutMenu.visible=!aboutMenu.visible,currentScreen=4,menuSelect=1),backSelect.isDown&&!1===keyDebouncing.backPressed||pauseButton.isDown&&!1===keyDebouncing.escPressed)&&(keyDebouncing.backPressed=!0,keyDebouncing.escPressed=!0,menuSelect=currentScreen=1,mainMenu.prototype.mainText()),settings.fullscreenString=isFullscreen,3==currentScreen&&(gobalFunctions.prototype.settingsText(),2==menuSelect&&"On"===isFullscreen&&(cursors.left.isDown&&!1===keyDebouncing.leftPressed&&(keyDebouncing.leftPressed=!0,gobalFunctions.prototype.fullExit()),cursors.right.isDown)&&!1===keyDebouncing.rightPressed&&(keyDebouncing.rightPressed=!0,gobalFunctions.prototype.fullExit()),3==menuSelect&&(0<settings.sound&&cursors.left.isDown&&!1===keyDebouncing.leftPressed&&(keyDebouncing.leftPressed=!0,gobalFunctions.prototype.soundDown()),settings.sound<10)&&cursors.right.isDown&&!1===keyDebouncing.rightPressed&&(keyDebouncing.rightPressed=!0,gobalFunctions.prototype.soundUp()),backSelect.isDown&&!1===keyDebouncing.backPressed||pauseButton.isDown&&!1===keyDebouncing.escPressed)&&(keyDebouncing.backPressed=!0,keyDebouncing.escPressed=!0,currentScreen=1,menuSelect=2,mainMenu.prototype.mainText()),4==currentScreen)&&(backSelect.isDown&&!1===keyDebouncing.backPressed||pauseButton.isDown&&!1===keyDebouncing.escPressed)&&(keyDebouncing.backPressed=!0,keyDebouncing.escPressed=!0,aboutMenu.visible=!aboutMenu.visible,currentScreen=2,menuSelect=3),cursors.up.isDown&&!1===keyDebouncing.upPressed?(keyDebouncing.upPressed=!0,menuSelect-=1):cursors.down.isDown&&!1===keyDebouncing.downPressed&&(keyDebouncing.downPressed=!0,menuSelect+=1),gobalFunctions.prototype.menuKeyDebouncing();function e(){return 1===currentScreen?1:0}(menuSelect=menuSelect>3-e()?1:menuSelect)<1&&(menuSelect=3-e())},render:function(){},mainText:function(){text.title.setText("FOX"),text.selector1.setText("Play"),text.selector2.setText("Settings"),text.selector3.setText("")},saveText:function(){text.title.setText("PLAY"),text.selector1.setText("Chapter "+sav.chapter+" - "+sav.chapterString),text.selector2.setText("Erase Save"),text.selector3.setText("About Game")},exit:function(){menu.kill(),text.title.destroy(),text.selector1.destroy(),text.selector2.destroy(),text.selector3.destroy(),mainMenu.prototype.chapter1()},chapter1:function(){game.state.start("chapter1")}},{}),init=!1,playerFunctions=((pauseMenu=function(e){}).prototype={loadPauseBg:function(){(pauseMenuBg=game.add.sprite(0,0,"pausedImage")).visible=!pauseMenuBg.visible,pauseMenuBg.fixedToCamera=!0},pauseText:function(){text.title.setText("PAUSED"),text.selector1.setText("Resume"),text.selector2.setText("Settings"),text.selector3.setText("Save and Quit")},pauseGame:function(){var e;init||(e=function(e){"Off"!==isFullscreen||(2!==currentScreen||2!==menuSelect)||keyDebouncing[e+"Pressed"]||(gobalFunctions.prototype.gofull(),keyDebouncing[e+"Pressed"]=!0)},cursors.left.onDown.add(function(){return e("left")},this),cursors.right.onDown.add(function(){return e("right")},this)),!0===game.paused&&!0===text.loaded&&(1==menuSelect&&gobalFunctions.prototype.highlight1(),2==menuSelect&&gobalFunctions.prototype.highlight2(),3==menuSelect&&gobalFunctions.prototype.highlight3(),1==currentScreen&&(1==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!1,game.paused=!1,pauseMenu.prototype.textKill(),pauseMenuBg.visible=!pauseMenuBg.visible),2==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!1,currentScreen=2,menuSelect=1),3==menuSelect&&select.isDown&&!1===keyDebouncing.enterPressed&&(keyDebouncing.enterPressed=!0,pauseMenu.prototype.textKill(),chapter1.prototype.exit()),backSelect.isDown&&!1===keyDebouncing.backPressed||pauseButton.isDown&&!1===keyDebouncing.escPressed)&&(game.paused=!1,keyDebouncing.backPressed=!0,keyDebouncing.escPressed=!0,menuSelect=1,pauseMenu.prototype.textKill(),pauseMenuBg.visible=!pauseMenuBg.visible),settings.fullscreenString=isFullscreen,2==currentScreen&&(gobalFunctions.prototype.settingsText(),2==menuSelect&&"On"===isFullscreen&&(cursors.left.isDown&&!1===keyDebouncing.leftPressed&&(keyDebouncing.leftPressed=!0,gobalFunctions.prototype.fullExit()),cursors.right.isDown)&&!1===keyDebouncing.rightPressed&&(keyDebouncing.rightPressed=!0,gobalFunctions.prototype.fullExit()),3==menuSelect&&(0<settings.sound&&cursors.left.isDown&&!1===keyDebouncing.leftPressed&&(keyDebouncing.leftPressed=!0,gobalFunctions.prototype.soundDown()),settings.sound<10)&&cursors.right.isDown&&!1===keyDebouncing.rightPressed&&(keyDebouncing.rightPressed=!0,gobalFunctions.prototype.soundUp()),backSelect.isDown&&!1===keyDebouncing.backPressed||pauseButton.isDown&&!1===keyDebouncing.escPressed)&&(keyDebouncing.backPressed=!0,keyDebouncing.escPressed=!0,currentScreen=1,menuSelect=2,pauseMenu.prototype.pauseText()),cursors.up.isDown&&!1===keyDebouncing.upPressed?(keyDebouncing.upPressed=!0,menuSelect-=1):cursors.down.isDown&&!1===keyDebouncing.downPressed&&(keyDebouncing.downPressed=!0,menuSelect+=1),3<menuSelect?menuSelect=1:menuSelect<1&&(menuSelect=3),gobalFunctions.prototype.menuKeyDebouncing()),gobalFunctions.prototype.soundAdjust(),setTimeout(pauseMenu.prototype.pauseGame,16)},createTextPause:function(){text.title=game.add.text(960,240,"PAUSED",titleStyle),text.title.anchor.setTo(.5),text.title.fill="#ffffff",text.title.fixedToCamera=!0,text.selector1=game.add.text(960,525,"Resume"),text.selector1.anchor.setTo(.5),text.selector1.fill="#ffffff",text.selector1.fixedToCamera=!0,text.selector2=game.add.text(960,690,"Settings"),text.selector2.anchor.setTo(.5),text.selector2.fill="#ffffff",text.selector2.fixedToCamera=!0,text.selector3=game.add.text(960,840,"Save and Quit"),text.selector3.anchor.setTo(.5),text.selector3.fill="#ffffff",text.selector3.fixedToCamera=!0,gobalFunctions.prototype.highlight1(),text.loaded=!0},textKill:function(){text.title.destroy(),text.selector1.destroy(),text.selector2.destroy(),text.selector3.destroy()}},{}),tree=(playerFuntions=function(e){},playerFunctions.prototype={load:function(){(player=game.add.sprite(sav.x,700,"playerSprite")).anchor.setTo(.7,1),player.scale.setTo(4,4),player.smoothed=!1,game.physics.arcade.enable(player),player.body.setSize(40,30,30,0),player.body.bounce.y=0,player.body.gravity.y=700,player.body.collideWorldBounds=!0,player.animations.add("idle",Phaser.Animation.generateFrameNames("foxIdle",0,15,"",4),10,!0),player.animations.add("walking",Phaser.Animation.generateFrameNames("foxRunning",0,6,"",4),10,!0),player.animations.add("jumping",Phaser.Animation.generateFrameNames("foxRunning",0,0,"",4),10,!0),player.animations.add("crawl",Phaser.Animation.generateFrameNames("foxCrawl",0,3,"",4),10,!0),player.animations.add("crawlIdle",Phaser.Animation.generateFrameNames("foxCrawl",0,0,"",4),10,!0),player.animations.add("dig",Phaser.Animation.generateFrameNames("foxDig",0,17,"",4),10,!1),player.animations.add("digSmall",Phaser.Animation.generateFrameNames("foxDigSmall",0,24,"",4),13,!1),player.animations.add("digUp",Phaser.Animation.generateFrameNames("foxDigUp",0,6,"",4),10,!1),player.animations.add("digUpAbove",Phaser.Animation.generateFrameNames("foxDigUpAbove",0,11,"",4),10,!1),player.animations.add("tailWhip",Phaser.Animation.generateFrameNames("foxTail",0,12,"",4),14,!1),player.animations.add("flip",Phaser.Animation.generateFrameNames("foxFlip",0,9,"",4),8,!1)},main:function(){!1===player.isDigging&&playerFunctions.prototype.controlLock()&&(leftButton.isDown?(!(player.directX=80)===player.tailWhip&&(player.scale.x=-4,player.movingRight=!1,player.body.offset.x=35),!1===player.dig&&(!1===player.tailWhip?player.body.velocity.x=-550:player.body.velocity.x=-350,!1===player.tailWhip)&&(player.body.blocked.down?player.animations.play("walking"):player.animations.play("jumping")),!0===player.dig&&(player.body.velocity.x=-350,player.body.blocked.down)&&player.animations.play("crawl")):rightButton.isDown?(!(player.directX=190)===player.tailWhip&&(player.scale.x=4,player.movingRight=!0,player.body.offset.x=30),!1===player.dig&&(!1===player.tailWhip?player.body.velocity.x=550:player.body.velocity.x=350,!1===player.tailWhip)&&(player.body.blocked.down?player.animations.play("walking"):player.animations.play("jumping")),!0===player.dig&&(player.body.velocity.x=350,player.body.blocked.down)&&player.animations.play("crawl")):!1===player.tailWhip&&(!1===player.dig&&player.animations.play("idle"),!0===player.dig)&&player.animations.play("crawlIdle")),jumpButton.isDown&&!1===player.dig&&playerFunctions.prototype.controlLock()&&(player.body.blocked.down&&!1===keyDebouncing.spacePressed&&(keyDebouncing.spacePressed=!0,player.body.velocity.y=-450),!1!==player.dobuleJump||player.body.blocked.down||!1!==keyDebouncing.spacePressed||(keyDebouncing.spacePressed=!0,player.dobuleJump=!0,player.body.velocity.y=-450)),player.body.blocked.down?player.dobuleJump=!1:player.dig=!1,!0===player.isDigging?(1600<currentTime-digDelay&&1==player.layer&&(player.isDigging=!1,keyDebouncing.downPressed=!0,keyDebouncing.spacePressed=!0,topMap.putTileWorldXY(mudTile,player.x,player.y-100,128,128,layerTop),player.y=player.y+256,player.dig=!0),1800<currentTime-digDelay&&2==player.layer&&(player.isDigging=!1,keyDebouncing.downPressed=!0,keyDebouncing.spacePressed=!0,player.y=player.y+128)):!0===player.isDiggingUp&&(600<currentTime-digDelay&&2==player.layer&&(keyDebouncing.downPressed=!0,keyDebouncing.spacePressed=!0,player.isDiggingUp=!1,chapter1.prototype.killLevel(),player.y=player.y-256,player.dig=!1,player.animations.play("digUpAbove"),player.isAnim=!0),600<currentTime-digDelay)&&3===player.layer&&(player.isDiggingUp=!1,keyDebouncing.downPressed=!0,keyDebouncing.spacePressed=!0,player.y=player.y-128),!0===player.isDigging?(1==player.layer&&player.animations.play("dig"),2==player.layer&&player.animations.play("digSmall")):!0===player.isDiggingUp&&player.animations.play("digUp"),downButton.isDown&&player.body.blocked.down&&player.layer<3&&playerFunctions.prototype.controlLock()&&playerFunctions.prototype.tileBelow()&&!1===keyDebouncing.downPressed&&(player.layer<2&&playerFunctions.prototype.onTile()?(playerFunctions.prototype.digDown(),!0===soundPlay&&digDelaySfx.play("",0,1,!1)):1<player.layer&&(playerFunctions.prototype.digDown(),!0===soundPlay)&&digSfx.play("",0,1,!1)),jumpButton.isDown&&playerFunctions.prototype.controlLock()&&playerFunctions.prototype.tileAbove()&&!1===keyDebouncing.spacePressed&&1<player.layer&&(keyDebouncing.spacePressed=!0,playerFunctions.prototype.digUp()),111===player.animations.currentFrame.index&&(player.isAnim=!1),(player.body.blocked.right&&!1===player.tailWhip||player.body.blocked.left&&!1===player.tailWhip)&&(player.animations.stop(null,!1),!1===player.dig)&&(player.frame=1),attackButton.isDown&&!1===player.dig&&player.body.blocked.down&&playerFunctions.prototype.controlLock()&&!1===keyDebouncing.attackPressed&&(keyDebouncing.attackPressed=!0,player.tailWhip=!0,(player.tailWhipJump=!0)===soundPlay)&&tailWhipSfx.play("",0,1,!1),!0===player.tailWhip&&(keyDebouncing.spacePressed=!0,player.animations.play("tailWhip"),!0===player.movingRight?player.body.offset.x=75:player.body.offset.x=-10,81==player.animations.currentFrame.index)&&(!(player.tailWhip=!1)===player.movingRight?player.body.offset.x=30:player.body.offset.x=35),!0===player.killCheck&&!1===player.killAnim&&(player.killAnim=!0,player.animations.play("flip")),!0===player.animations.currentAnim.isFinished&&!0===player.killCheck&&playerFunctions.prototype.kill()},varibleSet:function(){mudTile=51,player.x=sav.x,player.y=1022,player.movingRight=!0,player.dig=!1,player.isDigging=!1,player.isDiggingUp=!1,player.dobuleJump=!1,player.tailWhip=!1,player.killCheck=!1,player.killAnim=!1,player.killUnderground=!1,player.isAnim=!1,digDelay=null},digDown:function(){mudTile=49,player.isDigging=!0,playerFunctions.prototype.digDelayFunc(),playerFunctions.prototype.onTile()},digUp:function(){player.isDiggingUp=!0,playerFunctions.prototype.digDelayFunc(),playerFunctions.prototype.onTile()},digDelayFunc:function(){digDelay=game.time.now},controlLock:function(){return!1===player.isDigging&&!1===player.isDiggingUp&&!1===player.killAnim&&!1===player.isAnim&&!1===player.killCheck},objectsLayer:function(){player.body.blocked.left||player.body.blocked.right||(player.layer=0,player.body.velocity.x=0)},topLayer:function(){player.layer=1,player.dig=!1,player.body.velocity.x=0},tunnel1:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){player.layer=2,tunnel1.fill(51,layerTunnel1.getTileX(player.x-player.directX),layerTunnel1.getTileY(player.y-128),3,1)}),tunnel2:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){player.layer=3,tunnel2.fill(51,layerTunnel2.getTileX(player.x-player.directX),layerTunnel2.getTileY(player.y-128),3,1)}),tileAbove:function(){return 3==player.layer?player.tileAbove=objectsMap.getTileWorldXY(player.x,player.y-129):2==player.layer&&(player.tileAbove=objectsMap.getTileWorldXY(player.x,player.y-257)),null===player.tileAbove},tileBelow:function(){return 2==player.layer?player.tileBelow=objectsMap.getTileWorldXY(player.x,player.y):1==player.layer&&(player.tileBelow=objectsMap.getTileWorldXY(player.x,player.y+129)),null===player.tileBelow},onTile:function(){return player.movingRight,player.onTile=topMap.getTileWorldXY(player.x-100,player.y),null!==player.onTile},kill:function(){!0===soundPlay&&deathSfx.play("",0,1,!1),croc1.destroy(),croc1Functions.prototype.load(),playerFunctions.prototype.varibleSet(),treeGroup.destroy(),tree.prototype.load(),chapter1.prototype.killLevel(),croc1.parent.bringToTop(croc1),player.bringToTop(),treeGroup.parent.bringToTop(treeGroup)}},{});(tree=function(e){}).prototype={load:function(){treeGroup=game.add.group(),treeGroupChilldren=objectsMap.createFromObjects("objects",53,"treeSprite",0,!0,!1,treeGroup),treeGroup.enableBody=!0,game.physics.arcade.enable(treeGroup),treeGroup.setAll("anchor.x",.5),treeGroup.setAll("scale.x",5),treeGroup.setAll("scale.y",5),treeGroup.setAll("body.offset.y",-95),treeGroup.setAll("body.bounce",0),treeGroup.setAll("body.gravity.y",700),treeGroup.setAll("smoothed",!1)}};
